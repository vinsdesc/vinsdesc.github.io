!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){"use strict";var e=function(n){var t=this.constructor;return this.then(function(e){return t.resolve(n()).then(function(){return e})},function(e){return t.resolve(n()).then(function(){return t.reject(e)})})},n=setTimeout;function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function i(t,o){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var e=1===t._state?o.onFulfilled:o.onRejected;if(null!==e){var n;try{n=e(t._value)}catch(e){return void r(o.promise,e)}s(o.promise,n)}else(1===t._state?s:r)(o.promise,t._value)})):t._deferreds.push(o)}function s(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if(e instanceof a)return n._state=3,n._value=e,void l(n);if("function"==typeof t)return void u((o=t,i=e,function(){o.apply(i,arguments)}),n)}n._state=1,n._value=e,l(n)}catch(e){r(n,e)}var o,i}function r(e,n){e._state=2,e._value=n,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)i(e,e._deferreds[n]);e._deferreds=null}function c(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,s(n,e))},function(e){t||(t=!0,r(n,e))})}catch(e){if(t)return;t=!0,r(n,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,n){var t=new this.constructor(o);return i(this,new c(e,n,t)),t},a.prototype.finally=e,a.all=function(n){return new a(function(o,i){if(!n||void 0===n.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(n);if(0===a.length)return o([]);var s=a.length;function r(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void t.call(e,function(e){r(n,e)},i)}a[n]=e,0==--s&&o(a)}catch(e){i(e)}}for(var e=0;e<a.length;e++)r(e,a[e])})},a.resolve=function(n){return n&&"object"==typeof n&&n.constructor===a?n:new a(function(e){e(n)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(i){return new a(function(e,n){for(var t=0,o=i.length;t<o;t++)i[t].then(e,n)})},a._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();t.Promise?t.Promise.prototype.finally||(t.Promise.prototype.finally=e):t.Promise=a});var Geohash={base32:"0123456789bcdefghjkmnpqrstuvwxyz",encode:function(e,n,t){if(void 0===t){for(var o=1;o<=12;o++){var i=Geohash.encode(e,n,o),a=Geohash.decode(i);if(a.lat==e&&a.lon==n)return i}t=12}if(e=Number(e),n=Number(n),t=Number(t),isNaN(e)||isNaN(n)||isNaN(t))throw new Error("Invalid geohash");for(var s=0,r=0,l=!0,c="",u=-90,d=90,p=-180,f=180;c.length<t;){if(l){var g=(p+f)/2;g<=n?(s=2*s+1,p=g):(s*=2,f=g)}else{var h=(u+d)/2;h<=e?(s=2*s+1,u=h):(s*=2,d=h)}l=!l,5==++r&&(c+=Geohash.base32.charAt(s),s=r=0)}return c},decode:function(e){var n=Geohash.bounds(e),t=n.sw.lat,o=n.sw.lon,i=n.ne.lat,a=n.ne.lon,s=(t+i)/2,r=(o+a)/2;return s=s.toFixed(Math.floor(2-Math.log(i-t)/Math.LN10)),r=r.toFixed(Math.floor(2-Math.log(a-o)/Math.LN10)),{lat:Number(s),lon:Number(r)}},bounds:function(e){if(0===e.length)throw new Error("Invalid geohash");e=e.toLowerCase();for(var n=!0,t=-90,o=90,i=-180,a=180,s=0;s<e.length;s++){var r=e.charAt(s),l=Geohash.base32.indexOf(r);if(-1==l)throw new Error("Invalid geohash");for(var c=4;0<=c;c--){var u=l>>c&1;if(n){var d=(i+a)/2;1==u?i=d:a=d}else{var p=(t+o)/2;1==u?t=p:o=p}n=!n}}return{sw:{lat:t,lon:i},ne:{lat:o,lon:a}}},adjacent:function(e,n){if(e=e.toLowerCase(),n=n.toLowerCase(),0===e.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(n))throw new Error("Invalid direction");var t=e.slice(-1),o=e.slice(0,-1),i=e.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[n][i].indexOf(t)&&""!==o&&(o=Geohash.adjacent(o,n)),o+Geohash.base32.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[n][i].indexOf(t))},neighbours:function(e){return{n:Geohash.adjacent(e,"n"),ne:Geohash.adjacent(Geohash.adjacent(e,"n"),"e"),e:Geohash.adjacent(e,"e"),se:Geohash.adjacent(Geohash.adjacent(e,"s"),"e"),s:Geohash.adjacent(e,"s"),sw:Geohash.adjacent(Geohash.adjacent(e,"s"),"w"),w:Geohash.adjacent(e,"w"),nw:Geohash.adjacent(Geohash.adjacent(e,"n"),"w")}}};"undefined"!=typeof module&&module.exports&&(module.exports=Geohash),function(h){var o={fr:{FRA:"France",BEL:"Belgique",ESP:"Espagne",UNKNOWN_POSITION:"Position inconnue",DESC_IP_DISQUALIFIED:"Selon votre IP disqualifiée",DESC_IP_QUALIFIED:"Selon votre IP qualifiée",DESC_HTML5:"Selon la position de votre appareil",DESC_MANUAL:"Selon votre position encodée manuellement",RELOCATION:'<button class="pxs-link">Rafra&icirc;chissez</button> ou <button class="pxs-link">modifiez votre position</button>',MORE_INFO:"Plus d'infos",POSITION_BLOCKED:"Votre navigateur bloque actuellement la géolocalisation.",CLOSE:"Fermer",DETAIL:"Détail"},nl:{FRA:"Frankrijk",BEL:"België",ESP:"Spanje",UNKNOWN_POSITION:"Onbekende positie",DESC_IP_DISQUALIFIED:"Volgens uw gediskwalificeerd IP",DESC_IP_QUALIFIED:"Volgens uw gekwalificeerd IP",DESC_HTML5:"Volgens de lokalisatie van uw toestel",DESC_MANUAL:"Volgens de lokalisatie dat uw manueel heeft gecodeerde",RELOCATION:'<button class="pxs-link">Update</button> of <button class="pxs-link">verander uw lokalisatie</button>',MORE_INFO:"Meer info",POSITION_BLOCKED:"Uw navigator blokkeert momenteel de geolokalisatie.",CLOSE:"Sluiten",DETAIL:"Detail"},es:{FRA:"Francia",BEL:"Bélgica",ESP:"España",UNKNOWN_POSITION:"Posición desconocida",DESC_IP_DISQUALIFIED:"Según su IP descalificada",DESC_IP_QUALIFIED:"Según su IP calificada",DESC_HTML5:"Según la posición de su dispositivo",DESC_MANUAL:"Según su posición codificada manualmente",RELOCATION:'<button class="pxs-link">Refrescar</button> o <button class="pxs-link">modificar su posición</button>',MORE_INFO:"Más información",POSITION_BLOCKED:"Tu navegador está actualmente bloqueando la geolocalización.",CLOSE:"Cerca",DETAIL:"Detalle"},en:{FRA:"France",BEL:"Belgium",ESP:"Spain",UNKNOWN_POSITION:"Unknown position",DESC_IP_DISQUALIFIED:"Based on your disqualified IP",DESC_IP_QUALIFIED:"From your qualified IP",DESC_HTML5:"From your device position",DESC_MANUAL:"From your manually encoded location",RELOCATION:'<button class="pxs-link">Refresh</button> or <button class="pxs-link">update your location</button>',MORE_INFO:"More info",POSITION_BLOCKED:"Your browser is currently blocking the position.",CLOSE:"Close",DETAIL:"Detail"}};function O(e,n){var t=h.config().language;return o[t]||(t="en"),o[t][e]||n||""}function n(e){var n=document.getElementById(e);if(null!=n){var t,o,i,a,s,r,m=e+"-country",v=e+"-location",y=e+"-descr",l=e+"-reloc",E=e+"-more",c=e+"-modal",u=e+"-modal-iframe",d=h.config().customClassName||"pxs-custom-"+(2<=(t=window.location.hostname.split(".")).length?t[t.length-2]+"-"+t[t.length-1]:t[0]),p="px-toolbar";h.config().darkTheme&&(d+=" pxs-theme-dark"),d,n.innerHTML='<div class="pxs-widget '+d+'"> <div id="'+c+'" class="pxs-modal">\n  <div class="pxs-modal-content">\n<span class="pxs-modal-close">\n  <svg viewport="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg">\n    <line x1="1" y1="11" x2="11" y2="1" stroke="black" stroke-width="2"></line>\n    <line x1="1" y1="1" x2="11" y2="11" stroke="black" stroke-width="2"></line>\n  </svg>\n</span>\n    <iframe id="'+u+'" width="100%" height="500px" scrolling="no" frameBorder="0" src="'+h.config().apiRoot+"/assets/html/geolocation.html?language="+h.config().language+"&googleApiKey="+h.config().googleApiKey+'"></iframe>\n  </div>\n</div><span id="'+m+'" class="pxs-country"></span>\n    <div class="pxs-container">\n                <span id="'+v+'" class="pxs-location">\n                    <div class="pxs-dot">\n                        <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 303.68 469.22">\n                           <g class="Calque_2" data-name="Calque 2">\n                                <g class="Layer_1" data-name="Layer 1">\n                                    <path class="pxs-ip" d="M151.83,469.22a13,13,0,0,1-12.68-10L99.43,294.36a151.1,151.1,0,0,1-17.26-7.61,148.42,148.42,0,0,1-22.55-14.31,151.83,151.83,0,1,1,199.59-228,152.06,152.06,0,0,1,38.09,151,154.42,154.42,0,0,1-8.9,22.76,152.79,152.79,0,0,1-84.16,76.1L164.51,459.25A13,13,0,0,1,151.83,469.22Zm0-441A123.69,123.69,0,0,0,95.14,261.7a125.85,125.85,0,0,0,20.33,8.3,14.08,14.08,0,0,1,9.43,9.54l26.93,111.8,26.78-111.15c0-.06.19-.72.2-.78a13,13,0,0,1,8.89-9.26,123.43,123.43,0,0,0,87.74-117.6c0-.24,0-.47,0-.71s0-.48,0-.72A123.65,123.65,0,0,0,151.83,28.22Z"\n                                    />\n                                    <path class="pxs-ip" d="M151.83,207.16a56,56,0,1,1,56-55.95A56,56,0,0,1,151.83,207.16Zm0-85.82a29.87,29.87,0,1,0,29.87,29.87A29.9,29.9,0,0,0,151.83,121.34Z"\n                                    />\n                                </g>\n                            </g>\n                        </svg>\n                    </div>\n                </span>\n        <span class="pxs-sep">-</span>\n        <span id="'+y+'" class="pxs-desc"></span>\n        <span class="pxs-sep">-</span>\n        <span id="'+l+'" class="pxs-reloc"></span>\n        <span class="pxs-sep">-</span>\n        <a href="//proxistore.com/geolocation" class="pxs-link" target="_blank" id="'+E+'" class="pxs-more"></a>\n    </div>',-1<h.config().shortWidgetIds.indexOf(e)&&null!==navigator.userAgent.match(/Android|(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|bolt|cldc|compal|doris|elaine|fennec|gobrowser|hiptop|htc|huawei|iemobile|ip(hone|od|ad)|iris|kindle|lge |lumia|nokia|maemo|mib|midp|minimo|mmp|model-orange|netfront|nexus \d+|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|playbook|plucker|pocket|psp|qnx|semc-browser|series(4|6)0|Silk|skyfire|symb(ian|ianos|os)|teashark|teleca|treo|up\.(browser|link)|uzard|wap|windows (ce|phone)|xda|xiino/i)&&(n.innerHTML=n.innerHTML.replace("pxs-widget","pxs-widget pxs-mini")),(r=document.getElementById(c)).getElementsByClassName("pxs-modal-close")[0].onclick=function(){r.style.display="none",h.em.publish(h.em.GEOLOCATION_REQUESTED,{})},window.onclick=function(e){document.getElementsByTagName("body"),e.target===r&&(r.style.display="none",h.em.publish(h.em.GEOLOCATION_REQUESTED,{}))},document.getElementById(u).addEventListener("load",function e(){document.getElementById(u).removeEventListener("load",e),null!=o&&I(o,i)},!1),h.em.subscribe(h.em.GEOLOCATION_CHANGED,function(e){var n,t,o,i,a,s=O(e.countryIso3,e.country),r=(e.postalCode||"")+" "+(e.locality||""),l="",c=O("RELOCATION"),u=O("POSITION_BLOCKED"),d=O("DETAIL"),p=O("CLOSE"),f=O("MORE_INFO"),g=null,h=!1;"IP"===e.type?e.disqualified?(r=O("UNKNOWN_POSITION"),l=O("DESC_IP_DISQUALIFIED"),x("pxs-ip-disqualified")):(l=O("DESC_IP_QUALIFIED"),x("pxs-ip-qualified"),g=e.position):"HTML5"===e.type?(l=O("DESC_HTML5"),x("pxs-html5"),g=e.position,h=!0):"MANUAL"===e.type?(l=O("DESC_MANUAL"),x("pxs-manual"),g=e.position,h=!0):(r=O("UNKNOWN_POSITION"),x("pxs-unknown")),I(g,h),n=s,document.getElementById(m).textContent=n,t=r,(o=document.getElementById(v).childNodes)[o.length-1].nodeValue=t,i=l,document.getElementById(y).textContent=i,b(c),a=f,document.getElementById(E).textContent=a,w(u,d,p)}),h.em.subscribe(h.em.GEOLOCATION_ERROR,function(e){a&&"flex"!==a.style.display&&"pxs-slideOutRightcanShow"===a.className&&(a.classList.remove("pxs-slideOutRightcanShow"),a.className+="pxs-slideOutRight",s=setTimeout(g,5e3),a.style.display="flex",a.classList.replace("pxs-slideOutRight","pxs-slideInRight"))})}function b(e){document.getElementById(l).innerHTML=e,document.getElementById(l).getElementsByTagName("button")[0].onclick=function(){document.getElementById("px-toolbar").className+="canShow",h.em.publish(h.em.GEOLOCATION_REQUESTED,{forceHtml5:!0})},document.getElementById(l).getElementsByTagName("button")[1].onclick=function(){document.getElementById(c).style.display="block",f("set-focus-on-input",null)}}function I(e,n){f("update-map-center",{position:o=e,showMarker:i=n})}function f(e,n){var t=document.getElementById(u).contentWindow,o=new MessageChannel;t.postMessage({type:e,data:n},"*",[o.port2])}function w(e,n,t){if(!document.getElementById(p)){var o=document.createElement("div");o.setAttribute("id",p),o.setAttribute("class","pxs-slideOutRight"),o.innerHTML='    <?xml version="1.0" encoding="iso-8859-1"?>\n    \x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="120 -220 100 730" width="60px" height="45px">\n        <g>\n            <g>\n                <path d="M467.819,431.851l-36.651-61.056c-16.896-28.181-25.835-60.437-25.835-93.312V224    c0-82.325-67.008-149.333-149.333-149.333S106.667,141.675,106.667,224v53.483c0,32.875-8.939,65.131-25.835,93.312    l-36.651,61.056c-1.984,3.285-2.027,7.403-0.149,10.731c1.899,3.349,5.461,5.419,9.301,5.419h405.333    c3.84,0,7.403-2.069,9.301-5.419C469.845,439.253,469.803,435.136,467.819,431.851z M72.171,426.667l26.944-44.907    C118.016,350.272,128,314.219,128,277.483V224c0-70.592,57.408-128,128-128s128,57.408,128,128v53.483    c0,36.736,9.984,72.789,28.864,104.277l26.965,44.907H72.171z" fill="#91DC5A"/>\n            </g>\n        </g>\n        <g>\n            <g>\n                <path d="M256,0c-23.531,0-42.667,19.136-42.667,42.667v42.667C213.333,91.221,218.112,96,224,96s10.667-4.779,10.667-10.667    V42.667c0-11.776,9.557-21.333,21.333-21.333s21.333,9.557,21.333,21.333v42.667C277.333,91.221,282.112,96,288,96    s10.667-4.779,10.667-10.667V42.667C298.667,19.136,279.531,0,256,0z" fill="#91DC5A"/>\n            </g>\n        </g>\n        <g>\n            <g>\n                <path d="M302.165,431.936c-3.008-5.077-9.515-6.741-14.613-3.819c-5.099,2.987-6.805,9.536-3.819,14.613    c2.773,4.715,4.288,10.368,4.288,15.936c0,17.643-14.357,32-32,32c-17.643,0-32-14.357-32-32c0-5.568,1.515-11.221,4.288-15.936    c2.965-5.099,1.259-11.627-3.819-14.613c-5.141-2.923-11.627-1.259-14.613,3.819c-4.715,8.064-7.211,17.301-7.211,26.731    C202.667,488.085,226.581,512,256,512s53.333-23.915,53.376-53.333C309.376,449.237,306.88,440,302.165,431.936z" fill="#91DC5A"/>\n            </g>\n        </g>\n    </svg>\n    <p>'+e+'</p>\n    <ul id="px-toolbar-menu">\n        <li>'+t+'</li>\n <li><a href="https://www.proxistore.com/geolocation?lang='+h.config().language+'" target="_blank" >'+n+"</a></li>\n    </ul>\n</div>",document.body.appendChild(o),a=document.getElementById(p),document.getElementById("px-toolbar-menu").children[0].onclick=function(){a.style.display="none"},a.onmouseover=function(){this.children[2].style.display="flex",clearTimeout(s)},a.onmouseout=function(){this.children[2].style.display="none",s=setTimeout(g,2e3)}}}function g(){a.classList.replace("pxs-slideInRight","pxs-slideOutRight"),setTimeout(void(a.style.display="none"),1e3)}function x(e){for(var n=document.getElementById(v).getElementsByTagName("div")[0].getElementsByTagName("svg")[0].getElementsByTagName("g")[0].getElementsByTagName("g")[0].getElementsByTagName("path"),t=0;t<n.length;t++)n[t].setAttribute("class",e)}}function t(e){n(e)}var i=h.config;h.config=function(e){var n=i(e);return e&&(h.config().widgetIds&&Array.isArray(h.config().widgetIds)&&0<h.config().widgetIds.length&&("function"==typeof h.config().geoLocationCallback&&h.em.subscribe(h.em.GEOLOCATION_CHANGED,function(e){var n={type:e.type,locality:e.locality,postalCode:e.postalCode,countryIso2:e.countryIso2,countryIso3:e.countryIso3,country:e.country,disqualified:e.disqualified};h.config().geoLocationCallback(n)}),h.config().widgetIds.forEach(function(e){new t(e)})),h.em.publish(h.em.GEOLOCATION_REQUESTED,{})),n}}((Proxistore=function(r){Object.defineProperty(r.em,"GEOLOCATION_CHANGED",{value:"GEOLOCATION_CHANGED",writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(r.em,"GEOLOCATION_ERROR",{value:"GEOLOCATION_ERROR",writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(r.em,"GEOLOCATION_REQUESTED",{value:"GEOLOCATION_REQUESTED",writable:!1,enumerable:!0,configurable:!1});var l=new r.Ajax;function t(e,n,t,o,i,a,s,r){this.type=e,this.locality=n,this.postalCode=t,this.countryIso2=o,this.countryIso3=i,this.country=a,this.disqualified=r,s&&(this.position=Geohash.decode(s))}return new function(){function i(o){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var n,t;(n={latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy},t=r.config().apiRootVersionedUrl+"/cookie/geo/html5?",Object.keys(n).forEach(function(e){t+=e+"="+n[e]+"&"}),t+="1=1",l.post(t)).then(function(e){var n;a(JSON.parse(e)),o&&(n=r.config().apiRootVersionedUrl+"/cookie/geo/manual",l.delete(n))},function(e){s(e)})},function(e){s(e)},{maximumAge:6e5,timeout:6e4,enableHighAccuracy:!1})}function a(e){var n=new t(e.geoCookieType,e.locality,e.postalCode,e.countryIso2,e.countryIso3,e.country,e.geoHash,e.disqualified);r.em.publish(r.em.GEOLOCATION_CHANGED,n)}function s(e){r.em.publish(r.em.GEOLOCATION_ERROR,e)}r.em.subscribe(r.em.GEOLOCATION_REQUESTED,function(e){var n,t,o;e.latitude&&e.longitude?(t=e,o=r.config().apiRootVersionedUrl+"/cookie/geo/manual?",Object.keys(t).forEach(function(e){o+=e+"="+t[e]+"&"}),o+="1=1",l.post(o)).then(function(e){a(JSON.parse(e))},function(e){s(e)}):e.forceHtml5?i(e.forceHtml5):(n=r.config().apiRootVersionedUrl+"/widget/geo",l.get(n)).then(function(e){var n=JSON.parse(e);a(n),r.config().disableHtml5GeoLocation||"IP"!==n.geoCookieType||i()},function(e){s(e)})})},r}((Proxistore=function(e){return e.Ajax=function(){function t(o,i,a){return new Promise(function(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(200<=t.status&&t.status<300?e(t.responseText):n(Error(t.statusText)))},t.onerror=function(){n(Error("Network Error"))},t.withCredentials=!0,t.open(i,o,!0),t.setRequestHeader("Content-Type","application/json"),t.send(a)})}this.get=function(e){return t(e,"GET")},this.post=function(e,n){return t(e,"POST",n)},this.put=function(e,n){return t(e,"PUT",n)},this.delete=function(e,n){return t(e,"DELETE",n)}},e}((Proxistore=function(e){return e.em=new function(){var i={};this.publish=function(e,n){var t=i[e];0!=!!t&&t.forEach(function(e){e.call(this,n)})},this.subscribe=function(e,n){var t=i[e];0==!!t&&(t=i[e]=[]),-1===t.indexOf(n)&&t.push(n)},this.unsubscribe=function(e,n){var t=i[e];if(0!=!!t){var o=t.indexOf(n);-1!==o&&t.splice(o)}}},e}((Proxistore=function(e){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,n){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},writable:!0,configurable:!0});var n={apiRoot:"//abs.proxistore.com",apiVersion:"v3",language:"fr",disableHtml5GeoLocation:!1,googleApiKey:"AIzaSyDXpL2ODv3_7-x0WhiPmspBEnHdIRlBWo8",geoLocationCallback:new function(e){},darkTheme:!1,customClassName:null,widgetIds:[],shortWidgetIds:[],verbose:!1};n.apiRootUrl=n.apiRoot+"/"+n.language,n.apiRootVersionedUrl=n.apiRootUrl+"/"+n.apiVersion;var t=Object.assign({},n);return e.config=function(e){return e&&((t=Object.assign(t,e)).language.match("fr|nl|es")?t.apiRootUrl=t.apiRoot+"/"+t.language:t.apiRootUrl=t.apiRoot+"/"+n.language,t.apiRootVersionedUrl=t.apiRootUrl+"/"+t.apiVersion),t},e.log=function(){if(t.verbose){var e=Array.prototype.slice.call(arguments);e.splice(0,0,"PROXISTORE -"),console.log.apply(this,e)}},e}(Proxistore||{}))||{}))||{}))||{}))||{});var Proxistore=function(w){function a(e,n){n=-1===n.search("\\?")?n+"?ps_v="+(new Date).getTime():n+"&ps_v="+(new Date).getTime();var t=document.createElement("img"),o=r("src",n);t.setAttributeNode(o),e.appendChild(t)}function r(e,n){var t=document.createAttribute(e);return t.value=n,t}function x(e,n,t){var o=function(e,n){var t=document.getElementById(n),o=document.getElementById("ps-pixelCounter-"+e);if(null===o){o=document.createElement("div");var i=r("id","ps-pixelCounter-"+e);o.setAttributeNode(i);var a=r("class","ps-pixelCounter");o.setAttributeNode(a);var s=r("style","display:none");o.setAttributeNode(s),t.appendChild(o)}return o}(e,n);if(t.constructor!==Array)a(o,t);else for(var i=t.length;i--;)a(o,t[i])}function O(e,n,t){clearTimeout(window["ps_infoboxTimeout_"+e]);var o=document.getElementById("ps-infobox-"+e);o.style.width="horizontal"===n?0===o.clientWidth||t?"250px":0:0===o.clientWidth||t?"116px":0}return w.box=function(e,n,t,o){var i,a,s,r=new w.Ajax;null!==n?r.put(w.config().apiRootVersionedUrl+"/rtb/prebid/viewed?dealId="+n):void 0!==o&&r.put(o),i=w.config().apiRoot+"/assets/css/proxistore.min.css",a=document.createElement("link"),s=document.getElementsByTagName("head")[0]||document.documentElement,a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",i),s.insertBefore(a,s.firstChild);var l,c,u,d,p,f,g,h,m,v,y,E=e.publisherSpot.publisherSpotReferenceId,b="horizontal",I="<span id='ps-picto-"+E+"' class='ps-picto "+b+"'>   <svg viewBox='0 0 1500 1500' width='0'><path d='M750,1500a41.7,41.7,0,0,1-40.53-31.88L582.47,941a483.06,483.06,0,0,1-55.19-24.33,473.74,473.74,0,0,1-72.09-45.77C334.12,778.29,264.61,637.76,264.61,485.39c0-129.73,50.49-251.63,142.16-343.25S620.4,0,750,0s251.5,50.47,343.26,142.14,142.16,213.59,142.16,343.25A486.14,486.14,0,0,1,1215,625,486,486,0,0,1,917.5,941l-127,527.11A41.71,41.71,0,0,1,750,1500ZM750,90.22c-105.49,0-204.71,41.12-279.37,115.77S354.88,379.92,354.88,485.39c0,124,56.59,238.44,155.24,313.91a390.76,390.76,0,0,0,123.61,63.82c14.05,4.32,26.68,16.24,30.16,30.52L750,1251l85.59-355.32c0-.2.61-2.33.65-2.51a41.63,41.63,0,0,1,28.42-29.62c105.65-32.46,192.85-107.14,240.76-205.34A400.36,400.36,0,0,0,1128.56,599a396.35,396.35,0,0,0,16.58-111.32c0-.77-.07-1.52-.07-2.28s0-1.51.07-2.28A392.4,392.4,0,0,0,1029.39,206C954.71,131.34,855.49,90.22,750,90.22Z'/><path d='M750,662.25c-98.61,0-178.84-80.24-178.84-178.87S651.37,304.51,750,304.51s178.89,80.24,178.89,178.87S848.61,662.25,750,662.25Zm0-274.35a95.48,95.48,0,1,0,95.49,95.49A95.58,95.58,0,0,0,750,387.89Z'/></svg></span><span id='ps-infobox-"+E+"' class='ps-infobox "+b+"'>   <span class='ps-location "+b+"'>       <svg viewBox='0 0 109.32 109.32' width='0'><path d='M108.14,1.18a4,4,0,0,0-4.45-.84L2.41,44.5A4,4,0,0,0,2.9,52L45,64.34l12.29,42.08a4,4,0,0,0,3.61,2.89h.26a4,4,0,0,0,3.69-2.41L109,5.63A4,4,0,0,0,108.14,1.18Z'/></svg>       <a class='ps-city "+b+"' href='"+e.relocalisationUrl+"' target='_blank'>"+e.surferCityName+"</a>   </span>   <span class='ps-actions "+b+"'>       <a id='ps-store-"+E+"' class='ps-store "+b+"' target='_blank'>           <svg viewBox='0 0 525.16 525.16' width='0'><path d='M517.47,244.07,281.09,7.68a26.12,26.12,0,0,0-37,0L7.68,244.07a26.12,26.12,0,0,0,0,37L244.09,517.47a26.12,26.12,0,0,0,37,0L517.49,281.07C527.71,271.15,527.71,254.52,517.47,244.07ZM315,328.35V262.69H209.89v78.84H157.39V236.45a26.34,26.34,0,0,1,26.24-26.26H315V144.55l91.9,91.9Z'/></svg>       </a>   </span></span><a id='ps-ad-"+E+"' class='ps-ad "+b+"' target='_blank'>   <img id='ps-ad-img-"+E+"' class='ps-ad-img "+b+"'></a>";document.getElementById(t).innerHTML=I,l=E,c=t,u=e,d=document.getElementById(c),clearInterval(window["ps_interval_"+l]),d.style.width=u.width+"px",d.style.height=u.height+"px",document.getElementById("ps-ad-img-"+l).src=u.urlVisuals[0],document.getElementById("ps-ad-"+l).href=u.urlRedirection,1<u.urlVisuals.length&&(window["ps_visualIdx_"+l]=1,window["ps_interval_"+l]=setInterval(function(){document.getElementById("ps-ad-img-"+l).src=u.urlVisuals[window["ps_visualIdx_"+l]],window["ps_visualIdx_"+l]=(window["ps_visualIdx_"+l]+1)%u.urlVisuals.length},5e3)),u.urlPixelCounters||(u.urlPixelCounters=[""]),0<u.urlPixelCounters.length&&x(x,c,u.urlPixelCounters),p=E,f=document.getElementById("ps-picto-"+p),window["ps_infoboxTimeout_"+p]=setTimeout(function(){f.click(),window["ps_infoboxTimeout_"+p]=setTimeout(function(){f.click()},4e3)},1e3),g=e,h=function(){r.put(w.config().apiRootUrl+"/tags/click/"+e.advertisementId,JSON.stringify({publisherSpotReferenceId:e.publisherSpot.publisherSpotReferenceId,campaignId:e.campaignId}),"application/json; charset=utf-8")},document.getElementById("ps-ad-"+g.publisherSpot.publisherSpotReferenceId).addEventListener("click",h),m=e,v=function(){O(e.publisherSpot.publisherSpotReferenceId,b)},y=function(){O(e.publisherSpot.publisherSpotReferenceId,b,!0)},document.getElementById("ps-picto-"+m.publisherSpot.publisherSpotReferenceId).addEventListener("click",v),document.getElementById("ps-infobox-"+m.publisherSpot.publisherSpotReferenceId).addEventListener("mouseover",y)},w}(Proxistore||{});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvbHlmaWxsLmpzIiwibGF0bG9uLWdlb2hhc2guanMiLCJweC13aWRnZXQuanMiLCJweC1nZW8uanMiLCJweC1hamF4LmpzIiwicHgtZW0uanMiLCJweC1hcGkuanMiLCJweC1ib3guanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwicHJvbWlzZUZpbmFsbHkiLCJjYWxsYmFjayIsImNvbnN0cnVjdG9yIiwidGhlbiIsInZhbHVlIiwicmVzb2x2ZSIsInJlYXNvbiIsInJlamVjdCIsInNldFRpbWVvdXRGdW5jIiwic2V0VGltZW91dCIsIm5vb3AiLCJQcm9taXNlIiwiZm4iLCJUeXBlRXJyb3IiLCJfc3RhdGUiLCJfaGFuZGxlZCIsIl92YWx1ZSIsInVuZGVmaW5lZCIsIl9kZWZlcnJlZHMiLCJkb1Jlc29sdmUiLCJoYW5kbGUiLCJzZWxmIiwiZGVmZXJyZWQiLCJfaW1tZWRpYXRlRm4iLCJjYiIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsInJldCIsImUiLCJwcm9taXNlIiwicHVzaCIsIm5ld1ZhbHVlIiwiZmluYWxlIiwidGhpc0FyZyIsImFwcGx5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiX3VuaGFuZGxlZFJlamVjdGlvbkZuIiwiaSIsImxlbiIsIkhhbmRsZXIiLCJkb25lIiwiZXgiLCJwcm90b3R5cGUiLCJwcm9tIiwiYWxsIiwiYXJyIiwiYXJncyIsIkFycmF5Iiwic2xpY2UiLCJjYWxsIiwicmVtYWluaW5nIiwicmVzIiwidmFsIiwicmFjZSIsInZhbHVlcyIsInNldEltbWVkaWF0ZSIsImVyciIsImNvbnNvbGUiLCJ3YXJuIiwiZ2xvYmFsTlMiLCJ3aW5kb3ciLCJFcnJvciIsIkdlb2hhc2giLCJiYXNlMzIiLCJlbmNvZGUiLCJsYXQiLCJsb24iLCJwcmVjaXNpb24iLCJwIiwiaGFzaCIsInBvc24iLCJkZWNvZGUiLCJOdW1iZXIiLCJpc05hTiIsImlkeCIsImJpdCIsImV2ZW5CaXQiLCJnZW9oYXNoIiwibGF0TWluIiwibGF0TWF4IiwibG9uTWluIiwibG9uTWF4IiwibG9uTWlkIiwibGF0TWlkIiwiY2hhckF0IiwiYm91bmRzIiwic3ciLCJuZSIsInRvRml4ZWQiLCJNYXRoIiwiZmxvb3IiLCJsb2ciLCJMTjEwIiwidG9Mb3dlckNhc2UiLCJjaHIiLCJpbmRleE9mIiwibiIsImJpdE4iLCJhZGphY2VudCIsImRpcmVjdGlvbiIsImxhc3RDaCIsInBhcmVudCIsInR5cGUiLCJzIiwidyIsIm5laWdoYm91cnMiLCJzZSIsIm53IiwiUHJveGlzdG9yZSIsIm1lc3NhZ2VzIiwiZnIiLCJGUkEiLCJCRUwiLCJFU1AiLCJVTktOT1dOX1BPU0lUSU9OIiwiREVTQ19JUF9ESVNRVUFMSUZJRUQiLCJERVNDX0lQX1FVQUxJRklFRCIsIkRFU0NfSFRNTDUiLCJERVNDX01BTlVBTCIsIlJFTE9DQVRJT04iLCJNT1JFX0lORk8iLCJQT1NJVElPTl9CTE9DS0VEIiwiQ0xPU0UiLCJERVRBSUwiLCJubCIsImVzIiwiZW4iLCJtZXNzYWdlIiwia2V5IiwiZGVmYXVsdFZhbHVlIiwibGFuZ3VhZ2UiLCJjb25maWciLCJjcmVhdGVXaWRnZXQiLCJwYXJlbnRFbGVtZW50SWQiLCJ3aWRnZXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaXRlbXMiLCJsYXRlc3RQb3NpdGlvbiIsImxhdGVzdFNob3dNYXJrZXIiLCJub3RpZmljYXRpb25CYXIiLCJ0aW1lT3V0SGFubGRlciIsIm1vZGFsIiwiY291bnRyeUVsZW1lbnRJZCIsImxvY2F0aW9uRWxlbWVudElkIiwiZGVzY3JpcHRpb25FbGVtZW50SWQiLCJyZWxvY2F0aW9uRWxlbWVudElkIiwibW9yZUluZm9FbGVtZW50SWQiLCJtb2RhbEVsZW1lbnRJZCIsIm1vZGFsSUZyYW1lRWxlbWVudElkIiwiY3VzdG9tQ2xhc3NOYW1lIiwibG9jYXRpb24iLCJob3N0bmFtZSIsInNwbGl0Iiwibm90aWZpY2F0aW9uVG9vbGJhcklkIiwiZGFya1RoZW1lIiwiaW5uZXJIVE1MIiwiYXBpUm9vdCIsImdvb2dsZUFwaUtleSIsInNob3J0V2lkZ2V0SWRzIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibWF0Y2giLCJyZXBsYWNlIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm9uY2xpY2siLCJzdHlsZSIsImRpc3BsYXkiLCJlbSIsInB1Ymxpc2giLCJHRU9MT0NBVElPTl9SRVFVRVNURUQiLCJldmVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImlGcmFtZUxvYWRlZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1cGRhdGVNYXBDZW50ZXIiLCJzdWJzY3JpYmUiLCJHRU9MT0NBVElPTl9DSEFOR0VEIiwiY291bnRyeSIsIm5vZGVzIiwiZGVzY3JpcHRpb24iLCJtb3JlSW5mbyIsImNvdW50cnlJc28zIiwicG9zdGFsQ29kZSIsImxvY2FsaXR5IiwicmVsb2NhdGlvbiIsImdlbG9jQmxvY2siLCJkZXRhaWwiLCJjbG9zZSIsInBvc2l0aW9uIiwic2hvd01hcmtlciIsImRpc3F1YWxpZmllZCIsInNldEljb25DbGFzcyIsInRleHRDb250ZW50IiwiY2hpbGROb2RlcyIsIm5vZGVWYWx1ZSIsInNldFJlbG9jYXRpb24iLCJjcmVhdGVOb3RpZmljYXRpb25CYXIiLCJHRU9MT0NBVElPTl9FUlJPUiIsImVycm9yIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiaGlkZU5vdGlmaWNhdGlvbiIsImZvcmNlSHRtbDUiLCJwb3N0TWVzc2FnZVRvSUZyYW1lIiwiZGF0YSIsImlGcmFtZVdpbmRvdyIsImNvbnRlbnRXaW5kb3ciLCJjaGFubmVsIiwiTWVzc2FnZUNoYW5uZWwiLCJwb3N0TWVzc2FnZSIsInBvcnQyIiwibm90aWZpY2F0aW9uRGl2IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNoaWxkcmVuIiwib25tb3VzZW92ZXIiLCJjbGVhclRpbWVvdXQiLCJvbm1vdXNlb3V0IiwiY2xzIiwicGF0aHMiLCJXaWRnZXQiLCJvdmVycmlkZGVuQ29uZmlnIiwiY2ZnIiwiYyIsIndpZGdldElkcyIsImlzQXJyYXkiLCJnZW9Mb2NhdGlvbkNhbGxiYWNrIiwibG9jYXRpb25SZXN0cmljdGVkIiwiY291bnRyeUlzbzIiLCJmb3JFYWNoIiwid2lkZ2V0SWQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndyaXRhYmxlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsImFqYXgiLCJBamF4IiwiTG9jYXRpb24iLCJnZW9IYXNoIiwiaHRtbDVHZW9sb2NhdGlvbiIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwicGFyYW1zIiwidXJsIiwibGF0aXR1ZGUiLCJjb29yZHMiLCJsb25naXR1ZGUiLCJhY2N1cmFjeSIsImFwaVJvb3RWZXJzaW9uZWRVcmwiLCJrZXlzIiwibmFtZSIsInBvc3QiLCJodG1sNUNvb2tpZVZhbHVlIiwiZ2VvbG9jYXRpb25DaGFuZ2VkIiwiSlNPTiIsInBhcnNlIiwiZGVsZXRlIiwiZ2VvbG9jYXRpb25FcnJvciIsIm1heGltdW1BZ2UiLCJ0aW1lb3V0IiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwiY29va2llIiwiZ2VvQ29va2llVHlwZSIsIm1hbnVhbENvb2tpZVZhbHVlIiwiZ2V0IiwiY29va2llVmFsdWUiLCJkaXNhYmxlSHRtbDVHZW9Mb2NhdGlvbiIsIm1ldGhvZCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJET05FIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJ3aXRoQ3JlZGVudGlhbHMiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJwdXQiLCJldmVudHMiLCJoYW5kbGVycyIsImhhbmRsZXIiLCJ1bnN1YnNjcmliZSIsImhhbmRsZXJJZHgiLCJzcGxpY2UiLCJhc3NpZ24iLCJ2YXJBcmdzIiwidG8iLCJpbmRleCIsIm5leHRTb3VyY2UiLCJuZXh0S2V5IiwiaGFzT3duUHJvcGVydHkiLCJfZGVmYXVsdHMiLCJhcGlWZXJzaW9uIiwidmVyYm9zZSIsImFwaVJvb3RVcmwiLCJfY29uZmlnIiwiYWRkUGl4ZWxDb3VudGVySW1nIiwicGl4ZWxDb3VudGVyRGl2IiwicGl4ZWxDb3VudGVySW1nVXJsIiwic2VhcmNoIiwiRGF0ZSIsImdldFRpbWUiLCJwaXhlbENvdW50ZXJfaW1nIiwicGl4ZWxDb3VudGVyX2ltZ19zcmMiLCJjcmVhdGVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGVOb2RlIiwiYXR0cmlidXRlIiwiYWRkUGl4ZWxDb3VudGVyIiwicHVibGlzaGVyU3BvdElkIiwiYm94SWQiLCJwaXhlbENvdW50ZXJJbWdVcmxzIiwiYm94UG9zaXRpb24iLCJwaXhlbENvdW50ZXJfZGl2X2lkIiwicGl4ZWxDb3VudGVyX2Rpdl9jbGFzcyIsInBpeGVsQ291bnRlcl9kaXZfc3R5bGUiLCJnZXRQaXhlbENvdW50ZXJEaXYiLCJtYW5hZ2VJbmZvQm94IiwicHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkIiwiaW5mb0JveE9yaWVudGF0aW9uIiwiZm9yY2VFeHBhbmQiLCJpbmZvQm94Iiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImJveCIsImFkdmVydGlzZW1lbnQiLCJkZWFsSWQiLCJ2aWV3UHV0VXJsIiwiaHJlZiIsImxpbmsiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsInBpY3RvIiwiY2xpY2tIYW5kbGVyIiwibW91c2VPdmVySGFuZGxlciIsInB1Ymxpc2hlclNwb3QiLCIkcHNfYm94X2NvZGUiLCJyZWxvY2FsaXNhdGlvblVybCIsInN1cmZlckNpdHlOYW1lIiwiY2xlYXJJbnRlcnZhbCIsImhlaWdodCIsInNyYyIsInVybFZpc3VhbHMiLCJ1cmxSZWRpcmVjdGlvbiIsInNldEludGVydmFsIiwidXJsUGl4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UUFBQXFILEdBVUE0QyxFQTRFQUEsRUE1RUFVLEVBNkVBLFdBQ0FsQixFQUFBUSxFQUFBWSxjQUFBbkIseUJBQUFDLElBOUVBaUIsRUErRUEsV0FDQW5CLEVBQUFRLEVBQUFZLGNBQUFuQix5QkFBQUMsR0FBQSxJQTlFQWxNLFNBQUFDLGVBQUEsWUFBQXVNLEVBQUFZLGNBQUFuQiwwQkFDQTFKLGlCQUFBLFFBQUEySyxHQUdBbE4sU0FBQUMsZUFBQSxjQUFBdU0sRUFBQVksY0FBQW5CLDBCQUNBMUosaUJBQUEsWUFBQTRLLElBK0VBOU8sRUFsTUEsQ0FvTUFBLFlBQUEiLCJmaWxlIjoicHJveGlzdG9yZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KCkgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQoZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgcHJvbWlzZUZpbmFsbHkgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgY29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICByZXR1cm4gdGhpcy50aGVuKFxuICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlc29sdmUoY2FsbGJhY2soKSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnJlamVjdChyZWFzb24pO1xuICAgICAgfSk7XG4gICAgfVxuICApO1xufTtcblxuLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gcHJvbWlzZS1wb2x5ZmlsbCB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbi8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxudmFyIHNldFRpbWVvdXRGdW5jID0gc2V0VGltZW91dDtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8vIFBvbHlmaWxsIGZvciBGdW5jdGlvbi5wcm90b3R5cGUuYmluZFxuZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZShmbikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSkpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vdCBhIGZ1bmN0aW9uJyk7XG4gIHRoaXMuX3N0YXRlID0gMDtcbiAgdGhpcy5faGFuZGxlZCA9IGZhbHNlO1xuICB0aGlzLl92YWx1ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fZGVmZXJyZWRzID0gW107XG5cbiAgZG9SZXNvbHZlKGZuLCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlKHNlbGYsIGRlZmVycmVkKSB7XG4gIHdoaWxlIChzZWxmLl9zdGF0ZSA9PT0gMykge1xuICAgIHNlbGYgPSBzZWxmLl92YWx1ZTtcbiAgfVxuICBpZiAoc2VsZi5fc3RhdGUgPT09IDApIHtcbiAgICBzZWxmLl9kZWZlcnJlZHMucHVzaChkZWZlcnJlZCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlbGYuX2hhbmRsZWQgPSB0cnVlO1xuICBQcm9taXNlLl9pbW1lZGlhdGVGbihmdW5jdGlvbigpIHtcbiAgICB2YXIgY2IgPSBzZWxmLl9zdGF0ZSA9PT0gMSA/IGRlZmVycmVkLm9uRnVsZmlsbGVkIDogZGVmZXJyZWQub25SZWplY3RlZDtcbiAgICBpZiAoY2IgPT09IG51bGwpIHtcbiAgICAgIChzZWxmLl9zdGF0ZSA9PT0gMSA/IHJlc29sdmUgOiByZWplY3QpKGRlZmVycmVkLnByb21pc2UsIHNlbGYuX3ZhbHVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldDtcbiAgICB0cnkge1xuICAgICAgcmV0ID0gY2Ioc2VsZi5fdmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChkZWZlcnJlZC5wcm9taXNlLCBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCByZXQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZShzZWxmLCBuZXdWYWx1ZSkge1xuICB0cnkge1xuICAgIC8vIFByb21pc2UgUmVzb2x1dGlvbiBQcm9jZWR1cmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gICAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICBpZiAoXG4gICAgICBuZXdWYWx1ZSAmJlxuICAgICAgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIG5ld1ZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICkge1xuICAgICAgdmFyIHRoZW4gPSBuZXdWYWx1ZS50aGVuO1xuICAgICAgaWYgKG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBzZWxmLl9zdGF0ZSA9IDM7XG4gICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIGZpbmFsZShzZWxmKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBkb1Jlc29sdmUoYmluZCh0aGVuLCBuZXdWYWx1ZSksIHNlbGYpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHNlbGYuX3N0YXRlID0gMTtcbiAgICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgIGZpbmFsZShzZWxmKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJlamVjdChzZWxmLCBlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgc2VsZi5fc3RhdGUgPSAyO1xuICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICBmaW5hbGUoc2VsZik7XG59XG5cbmZ1bmN0aW9uIGZpbmFsZShzZWxmKSB7XG4gIGlmIChzZWxmLl9zdGF0ZSA9PT0gMiAmJiBzZWxmLl9kZWZlcnJlZHMubGVuZ3RoID09PSAwKSB7XG4gICAgUHJvbWlzZS5faW1tZWRpYXRlRm4oZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXNlbGYuX2hhbmRsZWQpIHtcbiAgICAgICAgUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4oc2VsZi5fdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNlbGYuX2RlZmVycmVkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGhhbmRsZShzZWxmLCBzZWxmLl9kZWZlcnJlZHNbaV0pO1xuICB9XG4gIHNlbGYuX2RlZmVycmVkcyA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2UpIHtcbiAgdGhpcy5vbkZ1bGZpbGxlZCA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogbnVsbDtcbiAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcbiAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbn1cblxuLyoqXG4gKiBUYWtlIGEgcG90ZW50aWFsbHkgbWlzYmVoYXZpbmcgcmVzb2x2ZXIgZnVuY3Rpb24gYW5kIG1ha2Ugc3VyZVxuICogb25GdWxmaWxsZWQgYW5kIG9uUmVqZWN0ZWQgYXJlIG9ubHkgY2FsbGVkIG9uY2UuXG4gKlxuICogTWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCBhc3luY2hyb255LlxuICovXG5mdW5jdGlvbiBkb1Jlc29sdmUoZm4sIHNlbGYpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBmbihcbiAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICByZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHJlamVjdChzZWxmLCByZWFzb24pO1xuICAgICAgfVxuICAgICk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZWplY3Qoc2VsZiwgZXgpO1xuICB9XG59XG5cblByb21pc2UucHJvdG90eXBlWydjYXRjaCddID0gZnVuY3Rpb24ob25SZWplY3RlZCkge1xuICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHZhciBwcm9tID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9tKSk7XG4gIHJldHVybiBwcm9tO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IHByb21pc2VGaW5hbGx5O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uKGFycikge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgaWYgKCFhcnIgfHwgdHlwZW9mIGFyci5sZW5ndGggPT09ICd1bmRlZmluZWQnKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZS5hbGwgYWNjZXB0cyBhbiBhcnJheScpO1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiByZXNvbHZlKFtdKTtcbiAgICB2YXIgcmVtYWluaW5nID0gYXJncy5sZW5ndGg7XG5cbiAgICBmdW5jdGlvbiByZXMoaSwgdmFsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAodmFsICYmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgIHZhciB0aGVuID0gdmFsLnRoZW47XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGVuLmNhbGwoXG4gICAgICAgICAgICAgIHZhbCxcbiAgICAgICAgICAgICAgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJlamVjdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXJnc1tpXSA9IHZhbDtcbiAgICAgICAgaWYgKC0tcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgcmVzb2x2ZShhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgcmVqZWN0KGV4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcyhpLCBhcmdzW2ldKTtcbiAgICB9XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IFByb21pc2UpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHJlamVjdCh2YWx1ZSk7XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24odmFsdWVzKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsdWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0udGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBVc2UgcG9seWZpbGwgZm9yIHNldEltbWVkaWF0ZSBmb3IgcGVyZm9ybWFuY2UgZ2FpbnNcblByb21pc2UuX2ltbWVkaWF0ZUZuID1cbiAgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICBmdW5jdGlvbihmbikge1xuICAgICAgc2V0SW1tZWRpYXRlKGZuKTtcbiAgICB9KSB8fFxuICBmdW5jdGlvbihmbikge1xuICAgIHNldFRpbWVvdXRGdW5jKGZuLCAwKTtcbiAgfTtcblxuUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4gPSBmdW5jdGlvbiBfdW5oYW5kbGVkUmVqZWN0aW9uRm4oZXJyKSB7XG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZSkge1xuICAgIGNvbnNvbGUud2FybignUG9zc2libGUgVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uOicsIGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICB9XG59O1xuXG52YXIgZ2xvYmFsTlMgPSAoZnVuY3Rpb24oKSB7XG4gIC8vIHRoZSBvbmx5IHJlbGlhYmxlIG1lYW5zIHRvIGdldCB0aGUgZ2xvYmFsIG9iamVjdCBpc1xuICAvLyBgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKWBcbiAgLy8gSG93ZXZlciwgdGhpcyBjYXVzZXMgQ1NQIHZpb2xhdGlvbnMgaW4gQ2hyb21lIGFwcHMuXG4gIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gc2VsZjtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gd2luZG93O1xuICB9XG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWw7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QnKTtcbn0pKCk7XG5cbmlmICghZ2xvYmFsTlMuUHJvbWlzZSkge1xuICBnbG9iYWxOUy5Qcm9taXNlID0gUHJvbWlzZTtcbn0gZWxzZSBpZiAoIWdsb2JhbE5TLlByb21pc2UucHJvdG90eXBlWydmaW5hbGx5J10pIHtcbiAgZ2xvYmFsTlMuUHJvbWlzZS5wcm90b3R5cGVbJ2ZpbmFsbHknXSA9IHByb21pc2VGaW5hbGx5O1xufVxuXG59KSkpO1xuIiwiLyogLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtICAqL1xuLyogR2VvaGFzaCBlbmNvZGluZy9kZWNvZGluZyBhbmQgYXNzb2NpYXRlZCBmdW5jdGlvbnMgICAoYykgQ2hyaXMgVmVuZXNzIDIwMTQtMjAxNiAvIE1JVCBMaWNlbmNlICAqL1xuLyogLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtICAqL1xuXG4ndXNlIHN0cmljdCc7XG5cblxuLyoqXG4gKiBHZW9oYXNoIGVuY29kZSwgZGVjb2RlLCBib3VuZHMsIG5laWdoYm91cnMuXG4gKlxuICogQG5hbWVzcGFjZVxuICovXG52YXIgR2VvaGFzaCA9IHt9O1xuXG4vKiAoR2VvaGFzaC1zcGVjaWZpYykgQmFzZTMyIG1hcCAqL1xuR2VvaGFzaC5iYXNlMzIgPSAnMDEyMzQ1Njc4OWJjZGVmZ2hqa21ucHFyc3R1dnd4eXonO1xuXG4vKipcbiAqIEVuY29kZXMgbGF0aXR1ZGUvbG9uZ2l0dWRlIHRvIGdlb2hhc2gsIGVpdGhlciB0byBzcGVjaWZpZWQgcHJlY2lzaW9uIG9yIHRvIGF1dG9tYXRpY2FsbHlcbiAqIGV2YWx1YXRlZCBwcmVjaXNpb24uXG4gKlxuICogQHBhcmFtICAge251bWJlcn0gbGF0IC0gTGF0aXR1ZGUgaW4gZGVncmVlcy5cbiAqIEBwYXJhbSAgIHtudW1iZXJ9IGxvbiAtIExvbmdpdHVkZSBpbiBkZWdyZWVzLlxuICogQHBhcmFtICAge251bWJlcn0gW3ByZWNpc2lvbl0gLSBOdW1iZXIgb2YgY2hhcmFjdGVycyBpbiByZXN1bHRpbmcgZ2VvaGFzaC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEdlb2hhc2ggb2Ygc3VwcGxpZWQgbGF0aXR1ZGUvbG9uZ2l0dWRlLlxuICogQHRocm93cyAgSW52YWxpZCBnZW9oYXNoLlxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgdmFyIGdlb2hhc2ggPSBHZW9oYXNoLmVuY29kZSg1Mi4yMDUsIDAuMTE5LCA3KTsgLy8gZ2VvaGFzaDogJ3UxMjBmeHcnXG4gKi9cbkdlb2hhc2guZW5jb2RlID0gZnVuY3Rpb24obGF0LCBsb24sIHByZWNpc2lvbikge1xuICAgIC8vIGluZmVyIHByZWNpc2lvbj9cbiAgICBpZiAodHlwZW9mIHByZWNpc2lvbiA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyByZWZpbmUgZ2VvaGFzaCB1bnRpbCBpdCBtYXRjaGVzIHByZWNpc2lvbiBvZiBzdXBwbGllZCBsYXQvbG9uXG4gICAgICAgIGZvciAodmFyIHA9MTsgcDw9MTI7IHArKykge1xuICAgICAgICAgICAgdmFyIGhhc2ggPSBHZW9oYXNoLmVuY29kZShsYXQsIGxvbiwgcCk7XG4gICAgICAgICAgICB2YXIgcG9zbiA9IEdlb2hhc2guZGVjb2RlKGhhc2gpO1xuICAgICAgICAgICAgaWYgKHBvc24ubGF0PT1sYXQgJiYgcG9zbi5sb249PWxvbikgcmV0dXJuIGhhc2g7XG4gICAgICAgIH1cbiAgICAgICAgcHJlY2lzaW9uID0gMTI7IC8vIHNldCB0byBtYXhpbXVtXG4gICAgfVxuXG4gICAgbGF0ID0gTnVtYmVyKGxhdCk7XG4gICAgbG9uID0gTnVtYmVyKGxvbik7XG4gICAgcHJlY2lzaW9uID0gTnVtYmVyKHByZWNpc2lvbik7XG5cbiAgICBpZiAoaXNOYU4obGF0KSB8fCBpc05hTihsb24pIHx8IGlzTmFOKHByZWNpc2lvbikpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBnZW9oYXNoJyk7XG5cbiAgICB2YXIgaWR4ID0gMDsgLy8gaW5kZXggaW50byBiYXNlMzIgbWFwXG4gICAgdmFyIGJpdCA9IDA7IC8vIGVhY2ggY2hhciBob2xkcyA1IGJpdHNcbiAgICB2YXIgZXZlbkJpdCA9IHRydWU7XG4gICAgdmFyIGdlb2hhc2ggPSAnJztcblxuICAgIHZhciBsYXRNaW4gPSAgLTkwLCBsYXRNYXggPSAgOTA7XG4gICAgdmFyIGxvbk1pbiA9IC0xODAsIGxvbk1heCA9IDE4MDtcblxuICAgIHdoaWxlIChnZW9oYXNoLmxlbmd0aCA8IHByZWNpc2lvbikge1xuICAgICAgICBpZiAoZXZlbkJpdCkge1xuICAgICAgICAgICAgLy8gYmlzZWN0IEUtVyBsb25naXR1ZGVcbiAgICAgICAgICAgIHZhciBsb25NaWQgPSAobG9uTWluICsgbG9uTWF4KSAvIDI7XG4gICAgICAgICAgICBpZiAobG9uID49IGxvbk1pZCkge1xuICAgICAgICAgICAgICAgIGlkeCA9IGlkeCoyICsgMTtcbiAgICAgICAgICAgICAgICBsb25NaW4gPSBsb25NaWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlkeCA9IGlkeCoyO1xuICAgICAgICAgICAgICAgIGxvbk1heCA9IGxvbk1pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGJpc2VjdCBOLVMgbGF0aXR1ZGVcbiAgICAgICAgICAgIHZhciBsYXRNaWQgPSAobGF0TWluICsgbGF0TWF4KSAvIDI7XG4gICAgICAgICAgICBpZiAobGF0ID49IGxhdE1pZCkge1xuICAgICAgICAgICAgICAgIGlkeCA9IGlkeCoyICsgMTtcbiAgICAgICAgICAgICAgICBsYXRNaW4gPSBsYXRNaWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlkeCA9IGlkeCoyO1xuICAgICAgICAgICAgICAgIGxhdE1heCA9IGxhdE1pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBldmVuQml0ID0gIWV2ZW5CaXQ7XG5cbiAgICAgICAgaWYgKCsrYml0ID09IDUpIHtcbiAgICAgICAgICAgIC8vIDUgYml0cyBnaXZlcyB1cyBhIGNoYXJhY3RlcjogYXBwZW5kIGl0IGFuZCBzdGFydCBvdmVyXG4gICAgICAgICAgICBnZW9oYXNoICs9IEdlb2hhc2guYmFzZTMyLmNoYXJBdChpZHgpO1xuICAgICAgICAgICAgYml0ID0gMDtcbiAgICAgICAgICAgIGlkeCA9IDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ2VvaGFzaDtcbn07XG5cblxuLyoqXG4gKiBEZWNvZGUgZ2VvaGFzaCB0byBsYXRpdHVkZS9sb25naXR1ZGUgKGxvY2F0aW9uIGlzIGFwcHJveGltYXRlIGNlbnRyZSBvZiBnZW9oYXNoIGNlbGwsXG4gKiAgICAgdG8gcmVhc29uYWJsZSBwcmVjaXNpb24pLlxuICpcbiAqIEBwYXJhbSAgIHtzdHJpbmd9IGdlb2hhc2ggLSBHZW9oYXNoIHN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gbGF0aXR1ZGUvbG9uZ2l0dWRlLlxuICogQHJldHVybnMge3tsYXQ6bnVtYmVyLCBsb246bnVtYmVyfX0gKENlbnRlciBvZikgZ2VvaGFzaGVkIGxvY2F0aW9uLlxuICogQHRocm93cyAgSW52YWxpZCBnZW9oYXNoLlxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgdmFyIGxhdGxvbiA9IEdlb2hhc2guZGVjb2RlKCd1MTIwZnh3Jyk7IC8vIGxhdGxvbjogeyBsYXQ6IDUyLjIwNSwgbG9uOiAwLjExODggfVxuICovXG5HZW9oYXNoLmRlY29kZSA9IGZ1bmN0aW9uKGdlb2hhc2gpIHtcblxuICAgIHZhciBib3VuZHMgPSBHZW9oYXNoLmJvdW5kcyhnZW9oYXNoKTsgLy8gPC0tIHRoZSBoYXJkIHdvcmtcbiAgICAvLyBub3cganVzdCBkZXRlcm1pbmUgdGhlIGNlbnRyZSBvZiB0aGUgY2VsbC4uLlxuXG4gICAgdmFyIGxhdE1pbiA9IGJvdW5kcy5zdy5sYXQsIGxvbk1pbiA9IGJvdW5kcy5zdy5sb247XG4gICAgdmFyIGxhdE1heCA9IGJvdW5kcy5uZS5sYXQsIGxvbk1heCA9IGJvdW5kcy5uZS5sb247XG5cbiAgICAvLyBjZWxsIGNlbnRyZVxuICAgIHZhciBsYXQgPSAobGF0TWluICsgbGF0TWF4KS8yO1xuICAgIHZhciBsb24gPSAobG9uTWluICsgbG9uTWF4KS8yO1xuXG4gICAgLy8gcm91bmQgdG8gY2xvc2UgdG8gY2VudHJlIHdpdGhvdXQgZXhjZXNzaXZlIHByZWNpc2lvbjog4oyKMi1sb2cxMCjOlMKwKeKMiyBkZWNpbWFsIHBsYWNlc1xuICAgIGxhdCA9IGxhdC50b0ZpeGVkKE1hdGguZmxvb3IoMi1NYXRoLmxvZyhsYXRNYXgtbGF0TWluKS9NYXRoLkxOMTApKTtcbiAgICBsb24gPSBsb24udG9GaXhlZChNYXRoLmZsb29yKDItTWF0aC5sb2cobG9uTWF4LWxvbk1pbikvTWF0aC5MTjEwKSk7XG5cbiAgICByZXR1cm4geyBsYXQ6IE51bWJlcihsYXQpLCBsb246IE51bWJlcihsb24pIH07XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyBTVy9ORSBsYXRpdHVkZS9sb25naXR1ZGUgYm91bmRzIG9mIHNwZWNpZmllZCBnZW9oYXNoLlxuICpcbiAqIEBwYXJhbSAgIHtzdHJpbmd9IGdlb2hhc2ggLSBDZWxsIHRoYXQgYm91bmRzIGFyZSByZXF1aXJlZCBvZi5cbiAqIEByZXR1cm5zIHt7c3c6IHtsYXQ6IG51bWJlciwgbG9uOiBudW1iZXJ9LCBuZToge2xhdDogbnVtYmVyLCBsb246IG51bWJlcn19fVxuICogQHRocm93cyAgSW52YWxpZCBnZW9oYXNoLlxuICovXG5HZW9oYXNoLmJvdW5kcyA9IGZ1bmN0aW9uKGdlb2hhc2gpIHtcbiAgICBpZiAoZ2VvaGFzaC5sZW5ndGggPT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBnZW9oYXNoJyk7XG5cbiAgICBnZW9oYXNoID0gZ2VvaGFzaC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgdmFyIGV2ZW5CaXQgPSB0cnVlO1xuICAgIHZhciBsYXRNaW4gPSAgLTkwLCBsYXRNYXggPSAgOTA7XG4gICAgdmFyIGxvbk1pbiA9IC0xODAsIGxvbk1heCA9IDE4MDtcblxuICAgIGZvciAodmFyIGk9MDsgaTxnZW9oYXNoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaHIgPSBnZW9oYXNoLmNoYXJBdChpKTtcbiAgICAgICAgdmFyIGlkeCA9IEdlb2hhc2guYmFzZTMyLmluZGV4T2YoY2hyKTtcbiAgICAgICAgaWYgKGlkeCA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGdlb2hhc2gnKTtcblxuICAgICAgICBmb3IgKHZhciBuPTQ7IG4+PTA7IG4tLSkge1xuICAgICAgICAgICAgdmFyIGJpdE4gPSBpZHggPj4gbiAmIDE7XG4gICAgICAgICAgICBpZiAoZXZlbkJpdCkge1xuICAgICAgICAgICAgICAgIC8vIGxvbmdpdHVkZVxuICAgICAgICAgICAgICAgIHZhciBsb25NaWQgPSAobG9uTWluK2xvbk1heCkgLyAyO1xuICAgICAgICAgICAgICAgIGlmIChiaXROID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9uTWluID0gbG9uTWlkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvbk1heCA9IGxvbk1pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGxhdGl0dWRlXG4gICAgICAgICAgICAgICAgdmFyIGxhdE1pZCA9IChsYXRNaW4rbGF0TWF4KSAvIDI7XG4gICAgICAgICAgICAgICAgaWYgKGJpdE4gPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBsYXRNaW4gPSBsYXRNaWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF0TWF4ID0gbGF0TWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW5CaXQgPSAhZXZlbkJpdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBib3VuZHMgPSB7XG4gICAgICAgIHN3OiB7IGxhdDogbGF0TWluLCBsb246IGxvbk1pbiB9LFxuICAgICAgICBuZTogeyBsYXQ6IGxhdE1heCwgbG9uOiBsb25NYXggfSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGJvdW5kcztcbn07XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGFkamFjZW50IGNlbGwgaW4gZ2l2ZW4gZGlyZWN0aW9uLlxuICpcbiAqIEBwYXJhbSAgIGdlb2hhc2ggLSBDZWxsIHRvIHdoaWNoIGFkamFjZW50IGNlbGwgaXMgcmVxdWlyZWQuXG4gKiBAcGFyYW0gICBkaXJlY3Rpb24gLSBEaXJlY3Rpb24gZnJvbSBnZW9oYXNoIChOL1MvRS9XKS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEdlb2NvZGUgb2YgYWRqYWNlbnQgY2VsbC5cbiAqIEB0aHJvd3MgIEludmFsaWQgZ2VvaGFzaC5cbiAqL1xuR2VvaGFzaC5hZGphY2VudCA9IGZ1bmN0aW9uKGdlb2hhc2gsIGRpcmVjdGlvbikge1xuICAgIC8vIGJhc2VkIG9uIGdpdGh1Yi5jb20vZGF2ZXRyb3kvZ2VvaGFzaC1qc1xuXG4gICAgZ2VvaGFzaCA9IGdlb2hhc2gudG9Mb3dlckNhc2UoKTtcbiAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24udG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChnZW9oYXNoLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGdlb2hhc2gnKTtcbiAgICBpZiAoJ25zZXcnLmluZGV4T2YoZGlyZWN0aW9uKSA9PSAtMSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGRpcmVjdGlvbicpO1xuXG4gICAgdmFyIG5laWdoYm91ciA9IHtcbiAgICAgICAgbjogWyAncDByMjE0MzZ4OHpiOWRjZjVoN2tqbm1xZXNndXR3dnknLCAnYmMwMWZnNDUyMzg5NjdkZXV2aGp5em5wa21zdHFyd3gnIF0sXG4gICAgICAgIHM6IFsgJzE0MzY1aDdrOWRjZmVzZ3Vqbm1xcDByMnR3dnl4OHpiJywgJzIzODk2N2RlYmMwMWZnNDVrbXN0cXJ3eHV2aGp5em5wJyBdLFxuICAgICAgICBlOiBbICdiYzAxZmc0NTIzODk2N2RldXZoanl6bnBrbXN0cXJ3eCcsICdwMHIyMTQzNng4emI5ZGNmNWg3a2pubXFlc2d1dHd2eScgXSxcbiAgICAgICAgdzogWyAnMjM4OTY3ZGViYzAxZmc0NWttc3Rxcnd4dXZoanl6bnAnLCAnMTQzNjVoN2s5ZGNmZXNndWpubXFwMHIydHd2eXg4emInIF0sXG4gICAgfTtcbiAgICB2YXIgYm9yZGVyID0ge1xuICAgICAgICBuOiBbICdwcnh6JywgICAgICdiY2ZndXZ5eicgXSxcbiAgICAgICAgczogWyAnMDI4YicsICAgICAnMDE0NWhqbnAnIF0sXG4gICAgICAgIGU6IFsgJ2JjZmd1dnl6JywgJ3ByeHonICAgICBdLFxuICAgICAgICB3OiBbICcwMTQ1aGpucCcsICcwMjhiJyAgICAgXSxcbiAgICB9O1xuXG4gICAgdmFyIGxhc3RDaCA9IGdlb2hhc2guc2xpY2UoLTEpOyAgICAvLyBsYXN0IGNoYXJhY3RlciBvZiBoYXNoXG4gICAgdmFyIHBhcmVudCA9IGdlb2hhc2guc2xpY2UoMCwgLTEpOyAvLyBoYXNoIHdpdGhvdXQgbGFzdCBjaGFyYWN0ZXJcblxuICAgIHZhciB0eXBlID0gZ2VvaGFzaC5sZW5ndGggJSAyO1xuXG4gICAgLy8gY2hlY2sgZm9yIGVkZ2UtY2FzZXMgd2hpY2ggZG9uJ3Qgc2hhcmUgY29tbW9uIHByZWZpeFxuICAgIGlmIChib3JkZXJbZGlyZWN0aW9uXVt0eXBlXS5pbmRleE9mKGxhc3RDaCkgIT0gLTEgJiYgcGFyZW50ICE9PSAnJykge1xuICAgICAgICBwYXJlbnQgPSBHZW9oYXNoLmFkamFjZW50KHBhcmVudCwgZGlyZWN0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBhcHBlbmQgbGV0dGVyIGZvciBkaXJlY3Rpb24gdG8gcGFyZW50XG4gICAgcmV0dXJuIHBhcmVudCArIEdlb2hhc2guYmFzZTMyLmNoYXJBdChuZWlnaGJvdXJbZGlyZWN0aW9uXVt0eXBlXS5pbmRleE9mKGxhc3RDaCkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgYWxsIDggYWRqYWNlbnQgY2VsbHMgdG8gc3BlY2lmaWVkIGdlb2hhc2guXG4gKlxuICogQHBhcmFtICAge3N0cmluZ30gZ2VvaGFzaCAtIEdlb2hhc2ggbmVpZ2hib3VycyBhcmUgcmVxdWlyZWQgb2YuXG4gKiBAcmV0dXJucyB7e24sbmUsZSxzZSxzLHN3LHcsbnc6IHN0cmluZ319XG4gKiBAdGhyb3dzICBJbnZhbGlkIGdlb2hhc2guXG4gKi9cbkdlb2hhc2gubmVpZ2hib3VycyA9IGZ1bmN0aW9uKGdlb2hhc2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAnbic6ICBHZW9oYXNoLmFkamFjZW50KGdlb2hhc2gsICduJyksXG4gICAgICAgICduZSc6IEdlb2hhc2guYWRqYWNlbnQoR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAnbicpLCAnZScpLFxuICAgICAgICAnZSc6ICBHZW9oYXNoLmFkamFjZW50KGdlb2hhc2gsICdlJyksXG4gICAgICAgICdzZSc6IEdlb2hhc2guYWRqYWNlbnQoR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAncycpLCAnZScpLFxuICAgICAgICAncyc6ICBHZW9oYXNoLmFkamFjZW50KGdlb2hhc2gsICdzJyksXG4gICAgICAgICdzdyc6IEdlb2hhc2guYWRqYWNlbnQoR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAncycpLCAndycpLFxuICAgICAgICAndyc6ICBHZW9oYXNoLmFkamFjZW50KGdlb2hhc2gsICd3JyksXG4gICAgICAgICdudyc6IEdlb2hhc2guYWRqYWNlbnQoR2VvaGFzaC5hZGphY2VudChnZW9oYXNoLCAnbicpLCAndycpLFxuICAgIH07XG59O1xuXG5cbi8qIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAgKi9cbmlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IEdlb2hhc2g7IC8vIENvbW1vbkpTLCBub2RlLmpzXG4iLCIoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcblxuICAgIHZhciBtZXNzYWdlcyA9IHtcbiAgICAgICAgZnI6IHtcbiAgICAgICAgICAgIEZSQTogXCJGcmFuY2VcIixcbiAgICAgICAgICAgIEJFTDogXCJCZWxnaXF1ZVwiLFxuICAgICAgICAgICAgRVNQOiBcIkVzcGFnbmVcIixcbiAgICAgICAgICAgIFVOS05PV05fUE9TSVRJT046IFwiUG9zaXRpb24gaW5jb25udWVcIixcbiAgICAgICAgICAgIERFU0NfSVBfRElTUVVBTElGSUVEOiBcIlNlbG9uIHZvdHJlIElQIGRpc3F1YWxpZmnDqWVcIixcbiAgICAgICAgICAgIERFU0NfSVBfUVVBTElGSUVEOiBcIlNlbG9uIHZvdHJlIElQIHF1YWxpZmnDqWVcIixcbiAgICAgICAgICAgIERFU0NfSFRNTDU6IFwiU2Vsb24gbGEgcG9zaXRpb24gZGUgdm90cmUgYXBwYXJlaWxcIixcbiAgICAgICAgICAgIERFU0NfTUFOVUFMOiBcIlNlbG9uIHZvdHJlIHBvc2l0aW9uIGVuY29kw6llIG1hbnVlbGxlbWVudFwiLFxuICAgICAgICAgICAgUkVMT0NBVElPTjogXCI8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+UmFmcmEmaWNpcmM7Y2hpc3NlejwvYnV0dG9uPiBvdSA8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+bW9kaWZpZXogdm90cmUgcG9zaXRpb248L2J1dHRvbj5cIixcbiAgICAgICAgICAgIE1PUkVfSU5GTzogXCJQbHVzIGQnaW5mb3NcIixcbiAgICAgICAgICAgIFBPU0lUSU9OX0JMT0NLRUQ6ICdWb3RyZSBuYXZpZ2F0ZXVyIGJsb3F1ZSBhY3R1ZWxsZW1lbnQgbGEgZ8Opb2xvY2FsaXNhdGlvbi4nLFxuICAgICAgICAgICAgQ0xPU0U6ICdGZXJtZXInLFxuICAgICAgICAgICAgREVUQUlMOiAnRMOpdGFpbCdcbiAgICAgICAgfSxcbiAgICAgICAgbmw6IHtcbiAgICAgICAgICAgIEZSQTogXCJGcmFua3JpamtcIixcbiAgICAgICAgICAgIEJFTDogXCJCZWxnacOrXCIsXG4gICAgICAgICAgICBFU1A6IFwiU3BhbmplXCIsXG4gICAgICAgICAgICBVTktOT1dOX1BPU0lUSU9OOiBcIk9uYmVrZW5kZSBwb3NpdGllXCIsXG4gICAgICAgICAgICBERVNDX0lQX0RJU1FVQUxJRklFRDogXCJWb2xnZW5zIHV3IGdlZGlza3dhbGlmaWNlZXJkIElQXCIsXG4gICAgICAgICAgICBERVNDX0lQX1FVQUxJRklFRDogXCJWb2xnZW5zIHV3IGdla3dhbGlmaWNlZXJkIElQXCIsXG4gICAgICAgICAgICBERVNDX0hUTUw1OiBcIlZvbGdlbnMgZGUgbG9rYWxpc2F0aWUgdmFuIHV3IHRvZXN0ZWxcIixcbiAgICAgICAgICAgIERFU0NfTUFOVUFMOiBcIlZvbGdlbnMgZGUgbG9rYWxpc2F0aWUgZGF0IHV3IG1hbnVlZWwgaGVlZnQgZ2Vjb2RlZXJkZVwiLFxuICAgICAgICAgICAgUkVMT0NBVElPTjogXCI8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+VXBkYXRlPC9idXR0b24+IG9mIDxidXR0b24gY2xhc3M9XFxcInB4cy1saW5rXFxcIj52ZXJhbmRlciB1dyBsb2thbGlzYXRpZTwvYnV0dG9uPlwiLFxuICAgICAgICAgICAgTU9SRV9JTkZPOiBcIk1lZXIgaW5mb1wiLFxuICAgICAgICAgICAgUE9TSVRJT05fQkxPQ0tFRDogJ1V3IG5hdmlnYXRvciBibG9ra2VlcnQgbW9tZW50ZWVsIGRlIGdlb2xva2FsaXNhdGllLicsXG4gICAgICAgICAgICBDTE9TRTogJ1NsdWl0ZW4nLFxuICAgICAgICAgICAgREVUQUlMOiAnRGV0YWlsJ1xuICAgICAgICB9LFxuICAgICAgICBlczoge1xuICAgICAgICAgICAgRlJBOiBcIkZyYW5jaWFcIixcbiAgICAgICAgICAgIEJFTDogXCJCw6lsZ2ljYVwiLFxuICAgICAgICAgICAgRVNQOiBcIkVzcGHDsWFcIixcbiAgICAgICAgICAgIFVOS05PV05fUE9TSVRJT046IFwiUG9zaWNpw7NuIGRlc2Nvbm9jaWRhXCIsXG4gICAgICAgICAgICBERVNDX0lQX0RJU1FVQUxJRklFRDogXCJTZWfDum4gc3UgSVAgZGVzY2FsaWZpY2FkYVwiLFxuICAgICAgICAgICAgREVTQ19JUF9RVUFMSUZJRUQ6IFwiU2Vnw7puIHN1IElQIGNhbGlmaWNhZGFcIixcbiAgICAgICAgICAgIERFU0NfSFRNTDU6IFwiU2Vnw7puIGxhIHBvc2ljacOzbiBkZSBzdSBkaXNwb3NpdGl2b1wiLFxuICAgICAgICAgICAgREVTQ19NQU5VQUw6IFwiU2Vnw7puIHN1IHBvc2ljacOzbiBjb2RpZmljYWRhIG1hbnVhbG1lbnRlXCIsXG4gICAgICAgICAgICBSRUxPQ0FUSU9OOiBcIjxidXR0b24gY2xhc3M9XFxcInB4cy1saW5rXFxcIj5SZWZyZXNjYXI8L2J1dHRvbj4gbyA8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+bW9kaWZpY2FyIHN1IHBvc2ljacOzbjwvYnV0dG9uPlwiLFxuICAgICAgICAgICAgTU9SRV9JTkZPOiBcIk3DoXMgaW5mb3JtYWNpw7NuXCIsXG4gICAgICAgICAgICBQT1NJVElPTl9CTE9DS0VEOiAnVHUgbmF2ZWdhZG9yIGVzdMOhIGFjdHVhbG1lbnRlIGJsb3F1ZWFuZG8gbGEgZ2VvbG9jYWxpemFjacOzbi4nLFxuICAgICAgICAgICAgQ0xPU0U6ICdDZXJjYScsXG4gICAgICAgICAgICBERVRBSUw6ICdEZXRhbGxlJ1xuICAgICAgICB9LFxuICAgICAgICBlbjoge1xuICAgICAgICAgICAgRlJBOiBcIkZyYW5jZVwiLFxuICAgICAgICAgICAgQkVMOiBcIkJlbGdpdW1cIixcbiAgICAgICAgICAgIEVTUDogXCJTcGFpblwiLFxuICAgICAgICAgICAgVU5LTk9XTl9QT1NJVElPTjogXCJVbmtub3duIHBvc2l0aW9uXCIsXG4gICAgICAgICAgICBERVNDX0lQX0RJU1FVQUxJRklFRDogXCJCYXNlZCBvbiB5b3VyIGRpc3F1YWxpZmllZCBJUFwiLFxuICAgICAgICAgICAgREVTQ19JUF9RVUFMSUZJRUQ6IFwiRnJvbSB5b3VyIHF1YWxpZmllZCBJUFwiLFxuICAgICAgICAgICAgREVTQ19IVE1MNTogXCJGcm9tIHlvdXIgZGV2aWNlIHBvc2l0aW9uXCIsXG4gICAgICAgICAgICBERVNDX01BTlVBTDogXCJGcm9tIHlvdXIgbWFudWFsbHkgZW5jb2RlZCBsb2NhdGlvblwiLFxuICAgICAgICAgICAgUkVMT0NBVElPTjogXCI8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+UmVmcmVzaDwvYnV0dG9uPiBvciA8YnV0dG9uIGNsYXNzPVxcXCJweHMtbGlua1xcXCI+dXBkYXRlIHlvdXIgbG9jYXRpb248L2J1dHRvbj5cIixcbiAgICAgICAgICAgIE1PUkVfSU5GTzogXCJNb3JlIGluZm9cIixcbiAgICAgICAgICAgIFBPU0lUSU9OX0JMT0NLRUQ6ICdZb3VyIGJyb3dzZXIgaXMgY3VycmVudGx5IGJsb2NraW5nIHRoZSBwb3NpdGlvbi4nLFxuICAgICAgICAgICAgQ0xPU0U6ICdDbG9zZScsXG4gICAgICAgICAgICBERVRBSUw6ICdEZXRhaWwnXG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Tm9uZShjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVzc2FnZShrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBQcm94aXN0b3JlLmNvbmZpZygpLmxhbmd1YWdlO1xuICAgICAgICBpZiAoIW1lc3NhZ2VzW2xhbmd1YWdlXSkgbGFuZ3VhZ2UgPSBcImVuXCI7XG4gICAgICAgIHJldHVybiBtZXNzYWdlc1tsYW5ndWFnZV1ba2V5XSB8fCBkZWZhdWx0VmFsdWUgfHwgXCJcIjtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVdpZGdldChwYXJlbnRFbGVtZW50SWQpIHtcbiAgICAgICAgLy9Qcm94aXN0b3JlLmxvZyhcIldJREdFVCAtXCIsIFwiQ3JlYXRpbmcgd2lkZ2V0XCIsIHBhcmVudEVsZW1lbnRJZCk7XG4gICAgICAgIHZhciB3aWRnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRFbGVtZW50SWQpO1xuICAgICAgICBpZiAod2lkZ2V0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluZmVycmVkQ2xhc3NOYW1lKCkge1xuICAgICAgICAgICAgdmFyIHRoZW1lQ2xhc3NOYW1lcyA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoZW1lQ2xhc3NOYW1lcy5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlbXMubGVuZ3RoID49IDIgPyBpdGVtc1tpdGVtcy5sZW5ndGggLSAyXSArIFwiLVwiICsgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0gOiBpdGVtc1swXTtcbiAgICAgICAgICAgIHJldHVybiBcInB4cy1jdXN0b20tXCIgKyByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGhlbWVOYW1lID0gZnVuY3Rpb24gKHRoZW1lQ2xhc3NOYW1lcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoZW1lQ2xhc3NOYW1lcztcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpc01vYmlsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkfChhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Ym9sdHxjbGRjfGNvbXBhbHxkb3Jpc3xlbGFpbmV8ZmVubmVjfGdvYnJvd3NlcnxoaXB0b3B8aHRjfGh1YXdlaXxpZW1vYmlsZXxpcChob25lfG9kfGFkKXxpcmlzfGtpbmRsZXxsZ2UgfGx1bWlhfG5va2lhfG1hZW1vfG1pYnxtaWRwfG1pbmltb3xtbXB8bW9kZWwtb3JhbmdlfG5ldGZyb250fG5leHVzIFxcZCt8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsYXlib29rfHBsdWNrZXJ8cG9ja2V0fHBzcHxxbnh8c2VtYy1icm93c2VyfHNlcmllcyg0fDYpMHxTaWxrfHNreWZpcmV8c3ltYihpYW58aWFub3N8b3MpfHRlYXNoYXJrfHRlbGVjYXx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dXphcmR8d2FwfHdpbmRvd3MgKGNlfHBob25lKXx4ZGF8eGlpbm8vaSkgIT09IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTaG9ydE1vYmlsZU1vZGUoKSB7XG4gICAgICAgICAgICBpZiAoaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgIHdpZGdldC5pbm5lckhUTUwgPSB3aWRnZXQuaW5uZXJIVE1MLnJlcGxhY2UoJ3B4cy13aWRnZXQnLCAncHhzLXdpZGdldCBweHMtbWluaScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIHZhciBjb3VudHJ5RWxlbWVudElkID0gcGFyZW50RWxlbWVudElkICsgXCItY291bnRyeVwiO1xuICAgICAgICB2YXIgbG9jYXRpb25FbGVtZW50SWQgPSBwYXJlbnRFbGVtZW50SWQgKyBcIi1sb2NhdGlvblwiO1xuICAgICAgICB2YXIgZGVzY3JpcHRpb25FbGVtZW50SWQgPSBwYXJlbnRFbGVtZW50SWQgKyBcIi1kZXNjclwiO1xuICAgICAgICB2YXIgcmVsb2NhdGlvbkVsZW1lbnRJZCA9IHBhcmVudEVsZW1lbnRJZCArIFwiLXJlbG9jXCI7XG4gICAgICAgIHZhciBtb3JlSW5mb0VsZW1lbnRJZCA9IHBhcmVudEVsZW1lbnRJZCArIFwiLW1vcmVcIjtcbiAgICAgICAgdmFyIG1vZGFsRWxlbWVudElkID0gcGFyZW50RWxlbWVudElkICsgXCItbW9kYWxcIjtcbiAgICAgICAgdmFyIG1vZGFsSUZyYW1lRWxlbWVudElkID0gcGFyZW50RWxlbWVudElkICsgXCItbW9kYWwtaWZyYW1lXCI7XG4gICAgICAgIHZhciBjdXN0b21DbGFzc05hbWUgPSBQcm94aXN0b3JlLmNvbmZpZygpLmN1c3RvbUNsYXNzTmFtZSB8fCBpbmZlcnJlZENsYXNzTmFtZSgpO1xuICAgICAgICB2YXIgbm90aWZpY2F0aW9uVG9vbGJhcklkID0gXCJweC10b29sYmFyXCI7XG4gICAgICAgIGlmICghIVByb3hpc3RvcmUuY29uZmlnKCkuZGFya1RoZW1lKSB7XG4gICAgICAgICAgICBjdXN0b21DbGFzc05hbWUgKz0gXCIgcHhzLXRoZW1lLWRhcmtcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGVtZU5hbWUoY3VzdG9tQ2xhc3NOYW1lKTtcblxuICAgICAgICB2YXIgbGF0ZXN0UG9zaXRpb24sIGxhdGVzdFNob3dNYXJrZXI7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q291bnRyeShjb3VudHJ5KSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb3VudHJ5RWxlbWVudElkKS50ZXh0Q29udGVudCA9IGNvdW50cnk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRMb2NhdGlvbihsb2NhdGlvbikge1xuICAgICAgICAgICAgdmFyIG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobG9jYXRpb25FbGVtZW50SWQpLmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBub2Rlc1tub2Rlcy5sZW5ndGggLSAxXS5ub2RlVmFsdWUgPSBsb2NhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZXNjcmlwdGlvbkVsZW1lbnRJZCkudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZnVuY3Rpb24gc2V0UmVsb2NhdGlvbihyZWxvY2F0aW9uKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZWxvY2F0aW9uRWxlbWVudElkKS5pbm5lckhUTUwgPSByZWxvY2F0aW9uO1xuICAgICAgICAgICAgLy8gTXVzdCBhdHRhY2ggdGhlIGNsaWNrIGV2ZXJ5IHRpbWUgdGhlIGlubmVySFRNTCBpcyBjaGFuZ2VkXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZWxvY2F0aW9uRWxlbWVudElkKVxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKVswXVxuICAgICAgICAgICAgICAgIC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdweC10b29sYmFyJykuY2xhc3NOYW1lICs9ICdjYW5TaG93JztcbiAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHtmb3JjZUh0bWw1OiB0cnVlfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZWxvY2F0aW9uRWxlbWVudElkKVxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJ1dHRvblwiKVsxXVxuICAgICAgICAgICAgICAgIC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsRWxlbWVudElkKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIHNldEZvY3VzT25JbnB1dCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIGZ1bmN0aW9uIHByZXBhcmVNb2RhbCgpIHtcbiAgICAgICAgICAgIC8vIEdldCB0aGUgbW9kYWxcbiAgICAgICAgICAgIHZhciBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsRWxlbWVudElkKTtcbiAgICAgICAgICAgIC8vIEdldCB0aGUgPHNwYW4+IGVsZW1lbnQgdGhhdCBjbG9zZXMgdGhlIG1vZGFsXG4gICAgICAgICAgICBtb2RhbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicHhzLW1vZGFsLWNsb3NlXCIpWzBdLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX1JFUVVFU1RFRCwge30pXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gV2hlbiB0aGUgdXNlciBjbGlja3MgYW55d2hlcmUgb3V0c2lkZSBvZiB0aGUgbW9kYWwsIGNsb3NlIGl0XG4gICAgICAgICAgICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gbW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHt9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlGcmFtZUxvYWRlZCgpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElGcmFtZUVsZW1lbnRJZCkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaUZyYW1lTG9hZGVkKTtcbiAgICAgICAgICAgICAgICBpZiAobGF0ZXN0UG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVNYXBDZW50ZXIobGF0ZXN0UG9zaXRpb24sIGxhdGVzdFNob3dNYXJrZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobW9kYWxJRnJhbWVFbGVtZW50SWQpLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGlGcmFtZUxvYWRlZCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBtYXAgY2VudGVyaW5nIGluIHRoZSBpRnJhbWUgd2hlbiB0aGUgcG9zaXRpb24gaGFzIGNoYW5nZWRcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTWFwQ2VudGVyKHBvc2l0aW9uLCBzaG93TWFya2VyKSB7IC8vIHtsYXQsIGxvbn0sIHRydWUvZmFsc2VcbiAgICAgICAgICAgIGxhdGVzdFBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgICAgICBsYXRlc3RTaG93TWFya2VyID0gc2hvd01hcmtlcjtcbiAgICAgICAgICAgIHBvc3RNZXNzYWdlVG9JRnJhbWUoXCJ1cGRhdGUtbWFwLWNlbnRlclwiLCB7cG9zaXRpb246IHBvc2l0aW9uLCBzaG93TWFya2VyOiBzaG93TWFya2VyfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGZvY3VzIG9uIHRoZSBpbnB1dCBmaWVsZCBvZiB0aGUgaUZyYW1lXG4gICAgICAgIGZ1bmN0aW9uIHNldEZvY3VzT25JbnB1dCgpIHtcbiAgICAgICAgICAgIHBvc3RNZXNzYWdlVG9JRnJhbWUoXCJzZXQtZm9jdXMtb24taW5wdXRcIiwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwb3N0TWVzc2FnZVRvSUZyYW1lKHR5cGUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBtb2RhbElGcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSUZyYW1lRWxlbWVudElkKTtcbiAgICAgICAgICAgIHZhciBpRnJhbWVXaW5kb3cgPSBtb2RhbElGcmFtZS5jb250ZW50V2luZG93O1xuICAgICAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgICAgIGlGcmFtZVdpbmRvdy5wb3N0TWVzc2FnZSh7dHlwZTogdHlwZSwgZGF0YTogZGF0YX0sICcqJywgW2NoYW5uZWwucG9ydDJdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE1vcmVJbmZvKG1vcmVJbmZvKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb3JlSW5mb0VsZW1lbnRJZCkudGV4dENvbnRlbnQgPSBtb3JlSW5mbztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uQmFyO1xuICAgICAgICB2YXIgdGltZU91dEhhbmxkZXI7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Tm90aWZpY2F0aW9uQmFyKCkge1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm90aWZpY2F0aW9uVG9vbGJhcklkKTtcbiAgICAgICAgICAgIHZhciBjbG9zZUJhckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdweC10b29sYmFyLW1lbnUnKS5jaGlsZHJlblswXTtcbiAgICAgICAgICAgIGNsb3NlQmFyQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyLm9ubW91c2VvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5bMl0uc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZU91dEhhbmxkZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5vbm1vdXNlb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5bMl0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aW1lT3V0SGFubGRlciA9IHNldFRpbWVvdXQoaGlkZU5vdGlmaWNhdGlvbiwgMjAwMCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTm90aWZpY2F0aW9uQmFyKGdlbG9jQmxvY2ssIGRldGFpbCwgY2xvc2UpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobm90aWZpY2F0aW9uVG9vbGJhcklkKSkge1xuICAgICAgICAgICAgICAgIHZhciBub3RpZmljYXRpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EaXYuc2V0QXR0cmlidXRlKCdpZCcsIG5vdGlmaWNhdGlvblRvb2xiYXJJZCk7XG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncHhzLXNsaWRlT3V0UmlnaHQnKTtcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25EaXYuaW5uZXJIVE1MID1cbiAgICAgICAgICAgICAgICAgICAgJyAgICA8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJpc28tODg1OS0xXCI/PlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgIDwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB2ZXJzaW9uPVwiMS4xXCIgaWQ9XCJDYXBhXzFcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHZpZXdCb3g9XCIxMjAgLTIyMCAxMDAgNzMwXCIgd2lkdGg9XCI2MHB4XCIgaGVpZ2h0PVwiNDVweFwiPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8Zz5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgIDxnPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNNDY3LjgxOSw0MzEuODUxbC0zNi42NTEtNjEuMDU2Yy0xNi44OTYtMjguMTgxLTI1LjgzNS02MC40MzctMjUuODM1LTkzLjMxMlYyMjQgICAgYzAtODIuMzI1LTY3LjAwOC0xNDkuMzMzLTE0OS4zMzMtMTQ5LjMzM1MxMDYuNjY3LDE0MS42NzUsMTA2LjY2NywyMjR2NTMuNDgzYzAsMzIuODc1LTguOTM5LDY1LjEzMS0yNS44MzUsOTMuMzEyICAgIGwtMzYuNjUxLDYxLjA1NmMtMS45ODQsMy4yODUtMi4wMjcsNy40MDMtMC4xNDksMTAuNzMxYzEuODk5LDMuMzQ5LDUuNDYxLDUuNDE5LDkuMzAxLDUuNDE5aDQwNS4zMzMgICAgYzMuODQsMCw3LjQwMy0yLjA2OSw5LjMwMS01LjQxOUM0NjkuODQ1LDQzOS4yNTMsNDY5LjgwMyw0MzUuMTM2LDQ2Ny44MTksNDMxLjg1MXogTTcyLjE3MSw0MjYuNjY3bDI2Ljk0NC00NC45MDcgICAgQzExOC4wMTYsMzUwLjI3MiwxMjgsMzE0LjIxOSwxMjgsMjc3LjQ4M1YyMjRjMC03MC41OTIsNTcuNDA4LTEyOCwxMjgtMTI4czEyOCw1Ny40MDgsMTI4LDEyOHY1My40ODMgICAgYzAsMzYuNzM2LDkuOTg0LDcyLjc4OSwyOC44NjQsMTA0LjI3N2wyNi45NjUsNDQuOTA3SDcyLjE3MXpcIiBmaWxsPVwiIzkxREM1QVwiLz5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgIDwvZz5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgPC9nPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8Zz5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgIDxnPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMjU2LDBjLTIzLjUzMSwwLTQyLjY2NywxOS4xMzYtNDIuNjY3LDQyLjY2N3Y0Mi42NjdDMjEzLjMzMyw5MS4yMjEsMjE4LjExMiw5NiwyMjQsOTZzMTAuNjY3LTQuNzc5LDEwLjY2Ny0xMC42NjcgICAgVjQyLjY2N2MwLTExLjc3Niw5LjU1Ny0yMS4zMzMsMjEuMzMzLTIxLjMzM3MyMS4zMzMsOS41NTcsMjEuMzMzLDIxLjMzM3Y0Mi42NjdDMjc3LjMzMyw5MS4yMjEsMjgyLjExMiw5NiwyODgsOTYgICAgczEwLjY2Ny00Ljc3OSwxMC42NjctMTAuNjY3VjQyLjY2N0MyOTguNjY3LDE5LjEzNiwyNzkuNTMxLDAsMjU2LDB6XCIgZmlsbD1cIiM5MURDNUFcIi8+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICA8L2c+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgIDwvZz5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgPGc+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICA8Zz5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTMwMi4xNjUsNDMxLjkzNmMtMy4wMDgtNS4wNzctOS41MTUtNi43NDEtMTQuNjEzLTMuODE5Yy01LjA5OSwyLjk4Ny02LjgwNSw5LjUzNi0zLjgxOSwxNC42MTMgICAgYzIuNzczLDQuNzE1LDQuMjg4LDEwLjM2OCw0LjI4OCwxNS45MzZjMCwxNy42NDMtMTQuMzU3LDMyLTMyLDMyYy0xNy42NDMsMC0zMi0xNC4zNTctMzItMzJjMC01LjU2OCwxLjUxNS0xMS4yMjEsNC4yODgtMTUuOTM2ICAgIGMyLjk2NS01LjA5OSwxLjI1OS0xMS42MjctMy44MTktMTQuNjEzYy01LjE0MS0yLjkyMy0xMS42MjctMS4yNTktMTQuNjEzLDMuODE5Yy00LjcxNSw4LjA2NC03LjIxMSwxNy4zMDEtNy4yMTEsMjYuNzMxICAgIEMyMDIuNjY3LDQ4OC4wODUsMjI2LjU4MSw1MTIsMjU2LDUxMnM1My4zMzMtMjMuOTE1LDUzLjM3Ni01My4zMzNDMzA5LjM3Niw0NDkuMjM3LDMwNi44OCw0NDAsMzAyLjE2NSw0MzEuOTM2elwiIGZpbGw9XCIjOTFEQzVBXCIvPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgICAgICAgPC9nPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICAnICAgICAgICA8L2c+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgPC9zdmc+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgPHA+JytnZWxvY0Jsb2NrKyc8L3A+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgPHVsIGlkPVwicHgtdG9vbGJhci1tZW51XCI+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgIDxsaT4nKyBjbG9zZSArJzwvbGk+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA8bGk+PGEgaHJlZj1cImh0dHBzOi8vd3d3LnByb3hpc3RvcmUuY29tL2dlb2xvY2F0aW9uP2xhbmc9JytQcm94aXN0b3JlLmNvbmZpZygpLmxhbmd1YWdlKydcIiB0YXJnZXQ9XCJfYmxhbmtcIiA+JysgZGV0YWlsICsnPC9hPjwvbGk+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgICcgICAgPC91bD5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RpZmljYXRpb25EaXYpO1xuICAgICAgICAgICAgICAgIHNldE5vdGlmaWNhdGlvbkJhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuXG4gICAgICAgIGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24oKSB7XG4gICAgICAgICAgICBub3RpZmljYXRpb25CYXIuY2xhc3NMaXN0LnJlbW92ZShcInB4cy1zbGlkZU91dFJpZ2h0Y2FuU2hvd1wiKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5jbGFzc05hbWUgKz0gJ3B4cy1zbGlkZU91dFJpZ2h0JztcbiAgICAgICAgICAgIHRpbWVPdXRIYW5sZGVyID0gc2V0VGltZW91dChoaWRlTm90aWZpY2F0aW9uLCA1MDAwKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uQmFyLmNsYXNzTGlzdC5yZXBsYWNlKCdweHMtc2xpZGVPdXRSaWdodCcsICdweHMtc2xpZGVJblJpZ2h0Jyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhub3RpZmljYXRpb25CYXIuY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgZnVuY3Rpb24gaGlkZU5vdGlmaWNhdGlvbigpIHtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbkJhci5jbGFzc0xpc3QucmVwbGFjZSgncHhzLXNsaWRlSW5SaWdodCcsICdweHMtc2xpZGVPdXRSaWdodCcpO1xuICAgICAgICAgICAgc2V0VGltZW91dChkaXNwbGF5Tm9uZShub3RpZmljYXRpb25CYXIpLCAxMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEljb25DbGFzcyhjbHMpIHtcbiAgICAgICAgICAgIHZhciBwYXRocyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxvY2F0aW9uRWxlbWVudElkKVxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKVswXVxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInN2Z1wiKVswXVxuICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImdcIilbMF1cbiAgICAgICAgICAgICAgICAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJnXCIpWzBdXG4gICAgICAgICAgICAgICAgLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGF0aFwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYXRoc1tpXS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBjbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICB3aWRnZXQuaW5uZXJIVE1MID0gXCI8ZGl2IGNsYXNzPVxcXCJweHMtd2lkZ2V0IFwiICsgY3VzdG9tQ2xhc3NOYW1lICsgXCJcXFwiPiBcIiArXG4gICAgICAgICAgICBcIjxkaXYgaWQ9XFxcIlwiICsgbW9kYWxFbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1tb2RhbFxcXCI+XFxuXCIgK1xuICAgICAgICAgICAgXCIgIDxkaXYgY2xhc3M9XFxcInB4cy1tb2RhbC1jb250ZW50XFxcIj5cXG5cIiArXG4gICAgICAgICAgICBcIjxzcGFuIGNsYXNzPVxcXCJweHMtbW9kYWwtY2xvc2VcXFwiPlxcblwiICtcbiAgICAgICAgICAgIFwiICA8c3ZnIHZpZXdwb3J0PVxcXCIwIDAgMTIgMTJcXFwiIHZlcnNpb249XFxcIjEuMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICA8bGluZSB4MT1cXFwiMVxcXCIgeTE9XFxcIjExXFxcIiB4Mj1cXFwiMTFcXFwiIHkyPVxcXCIxXFxcIiBzdHJva2U9XFxcImJsYWNrXFxcIiBzdHJva2Utd2lkdGg9XFxcIjJcXFwiPjwvbGluZT5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICA8bGluZSB4MT1cXFwiMVxcXCIgeTE9XFxcIjFcXFwiIHgyPVxcXCIxMVxcXCIgeTI9XFxcIjExXFxcIiBzdHJva2U9XFxcImJsYWNrXFxcIiBzdHJva2Utd2lkdGg9XFxcIjJcXFwiPjwvbGluZT5cXG5cIiArXG4gICAgICAgICAgICBcIiAgPC9zdmc+XFxuXCIgK1xuICAgICAgICAgICAgXCI8L3NwYW4+XFxuXCIgK1xuICAgICAgICAgICAgXCIgICAgPGlmcmFtZSBpZD1cXFwiXCIgKyBtb2RhbElGcmFtZUVsZW1lbnRJZCArIFwiXFxcIiB3aWR0aD1cXFwiMTAwJVxcXCIgaGVpZ2h0PVxcXCI1MDBweFxcXCIgc2Nyb2xsaW5nPVxcXCJub1xcXCIgZnJhbWVCb3JkZXI9XFxcIjBcXFwiIHNyYz1cXFwiXCIgKyBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3QgKyBcIi9hc3NldHMvaHRtbC9nZW9sb2NhdGlvbi5odG1sP2xhbmd1YWdlPVwiICsgUHJveGlzdG9yZS5jb25maWcoKS5sYW5ndWFnZSArIFwiJmdvb2dsZUFwaUtleT1cIiArIFByb3hpc3RvcmUuY29uZmlnKCkuZ29vZ2xlQXBpS2V5ICsgIFwiXFxcIj48L2lmcmFtZT5cXG5cIiArXG4gICAgICAgICAgICBcIiAgPC9kaXY+XFxuXCIgK1xuICAgICAgICAgICAgXCI8L2Rpdj5cIiArXG5cbiAgICAgICAgICAgIFwiPHNwYW4gaWQ9XFxcIlwiICsgY291bnRyeUVsZW1lbnRJZCArIFwiXFxcIiBjbGFzcz1cXFwicHhzLWNvdW50cnlcXFwiPjwvc3Bhbj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJweHMtY29udGFpbmVyXFxcIj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICA8c3BhbiBpZD1cXFwiXCIgKyBsb2NhdGlvbkVsZW1lbnRJZCArIFwiXFxcIiBjbGFzcz1cXFwicHhzLWxvY2F0aW9uXFxcIj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicHhzLWRvdFxcXCI+XFxuXCIgK1xuICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPVxcXCIyMFxcXCIgaGVpZ2h0PVxcXCIyMFxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMzAzLjY4IDQ2OS4yMlxcXCI+XFxuXCIgK1xuICAgICAgICAgICAgXCIgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBjbGFzcz1cXFwiQ2FscXVlXzJcXFwiIGRhdGEtbmFtZT1cXFwiQ2FscXVlIDJcXFwiPlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBjbGFzcz1cXFwiTGF5ZXJfMVxcXCIgZGF0YS1uYW1lPVxcXCJMYXllciAxXFxcIj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzPVxcXCJweHMtaXBcXFwiIGQ9XFxcIk0xNTEuODMsNDY5LjIyYTEzLDEzLDAsMCwxLTEyLjY4LTEwTDk5LjQzLDI5NC4zNmExNTEuMSwxNTEuMSwwLDAsMS0xNy4yNi03LjYxLDE0OC40MiwxNDguNDIsMCwwLDEtMjIuNTUtMTQuMzEsMTUxLjgzLDE1MS44MywwLDEsMSwxOTkuNTktMjI4LDE1Mi4wNiwxNTIuMDYsMCwwLDEsMzguMDksMTUxLDE1NC40MiwxNTQuNDIsMCwwLDEtOC45LDIyLjc2LDE1Mi43OSwxNTIuNzksMCwwLDEtODQuMTYsNzYuMUwxNjQuNTEsNDU5LjI1QTEzLDEzLDAsMCwxLDE1MS44Myw0NjkuMjJabTAtNDQxQTEyMy42OSwxMjMuNjksMCwwLDAsOTUuMTQsMjYxLjdhMTI1Ljg1LDEyNS44NSwwLDAsMCwyMC4zMyw4LjMsMTQuMDgsMTQuMDgsMCwwLDEsOS40Myw5LjU0bDI2LjkzLDExMS44LDI2Ljc4LTExMS4xNWMwLS4wNi4xOS0uNzIuMi0uNzhhMTMsMTMsMCwwLDEsOC44OS05LjI2LDEyMy40MywxMjMuNDMsMCwwLDAsODcuNzQtMTE3LjZjMC0uMjQsMC0uNDcsMC0uNzFzMC0uNDgsMC0uNzJBMTIzLjY1LDEyMy42NSwwLDAsMCwxNTEuODMsMjguMjJaXFxcIlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGNsYXNzPVxcXCJweHMtaXBcXFwiIGQ9XFxcIk0xNTEuODMsMjA3LjE2YTU2LDU2LDAsMSwxLDU2LTU1Ljk1QTU2LDU2LDAsMCwxLDE1MS44MywyMDcuMTZabTAtODUuODJhMjkuODcsMjkuODcsMCwxLDAsMjkuODcsMjkuODdBMjkuOSwyOS45LDAsMCwwLDE1MS44MywxMjEuMzRaXFxcIlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgICAgICAgICA8L3NwYW4+XFxuXCIgK1xuICAgICAgICAgICAgXCIgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJweHMtc2VwXFxcIj4tPC9zcGFuPlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICA8c3BhbiBpZD1cXFwiXCIgKyBkZXNjcmlwdGlvbkVsZW1lbnRJZCArIFwiXFxcIiBjbGFzcz1cXFwicHhzLWRlc2NcXFwiPjwvc3Bhbj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgPHNwYW4gY2xhc3M9XFxcInB4cy1zZXBcXFwiPi08L3NwYW4+XFxuXCIgK1xuICAgICAgICAgICAgXCIgICAgICAgIDxzcGFuIGlkPVxcXCJcIiArIHJlbG9jYXRpb25FbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1yZWxvY1xcXCI+PC9zcGFuPlxcblwiICtcbiAgICAgICAgICAgIFwiICAgICAgICA8c3BhbiBjbGFzcz1cXFwicHhzLXNlcFxcXCI+LTwvc3Bhbj5cXG5cIiArXG4gICAgICAgICAgICBcIiAgICAgICAgPGEgaHJlZj1cXFwiLy9wcm94aXN0b3JlLmNvbS9nZW9sb2NhdGlvblxcXCIgY2xhc3M9XFxcInB4cy1saW5rXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCIgaWQ9XFxcIlwiICsgbW9yZUluZm9FbGVtZW50SWQgKyBcIlxcXCIgY2xhc3M9XFxcInB4cy1tb3JlXFxcIj48L2E+XFxuXCIgK1xuICAgICAgICAgICAgXCIgICAgPC9kaXY+XCI7XG4gICAgICAgIFwiPC9kaXY+XCI7XG5cbiAgICAgICAgaWYgKFByb3hpc3RvcmUuY29uZmlnKCkuc2hvcnRXaWRnZXRJZHMuaW5kZXhPZihwYXJlbnRFbGVtZW50SWQpID4gLTEpIHtcbiAgICAgICAgICAgIHNldFNob3J0TW9iaWxlTW9kZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJlcGFyZU1vZGFsKCk7XG5cbiAgICAgICAgUHJveGlzdG9yZS5lbS5zdWJzY3JpYmUoUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9DSEFOR0VELCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBjb3VudHJ5ID0gbWVzc2FnZShldmVudC5jb3VudHJ5SXNvMywgZXZlbnQuY291bnRyeSk7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSAoZXZlbnQucG9zdGFsQ29kZSB8fCBcIlwiKSArIFwiIFwiICsgKGV2ZW50LmxvY2FsaXR5IHx8IFwiXCIpO1xuICAgICAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gXCJcIjtcbiAgICAgICAgICAgIHZhciByZWxvY2F0aW9uID0gbWVzc2FnZShcIlJFTE9DQVRJT05cIik7XG4gICAgICAgICAgICB2YXIgZ2Vsb2NCbG9jayA9IG1lc3NhZ2UoJ1BPU0lUSU9OX0JMT0NLRUQnKTtcbiAgICAgICAgICAgIHZhciBkZXRhaWwgPSBtZXNzYWdlKCdERVRBSUwnKTtcbiAgICAgICAgICAgIHZhciBjbG9zZSA9IG1lc3NhZ2UoJ0NMT1NFJyk7XG4gICAgICAgICAgICB2YXIgbW9yZUluZm8gPSBtZXNzYWdlKFwiTU9SRV9JTkZPXCIpO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIHZhciBzaG93TWFya2VyID0gZmFsc2U7XG5cblxuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwiSVBcIikge1xuICAgICAgICAgICAgICAgIGlmICghIWV2ZW50LmRpc3F1YWxpZmllZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IG1lc3NhZ2UoXCJVTktOT1dOX1BPU0lUSU9OXCIpO1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG1lc3NhZ2UoXCJERVNDX0lQX0RJU1FVQUxJRklFRFwiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWlwLWRpc3F1YWxpZmllZFwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG1lc3NhZ2UoXCJERVNDX0lQX1FVQUxJRklFRFwiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWlwLXF1YWxpZmllZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBldmVudC5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwiSFRNTDVcIikge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbWVzc2FnZShcIkRFU0NfSFRNTDVcIik7XG4gICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLWh0bWw1XCIpO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gZXZlbnQucG9zaXRpb247XG4gICAgICAgICAgICAgICAgc2hvd01hcmtlciA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwiTUFOVUFMXCIpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IG1lc3NhZ2UoXCJERVNDX01BTlVBTFwiKTtcbiAgICAgICAgICAgICAgICBzZXRJY29uQ2xhc3MoXCJweHMtbWFudWFsXCIpO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gZXZlbnQucG9zaXRpb247XG4gICAgICAgICAgICAgICAgc2hvd01hcmtlciA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gbWVzc2FnZShcIlVOS05PV05fUE9TSVRJT05cIik7XG4gICAgICAgICAgICAgICAgc2V0SWNvbkNsYXNzKFwicHhzLXVua25vd25cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZU1hcENlbnRlcihwb3NpdGlvbiwgc2hvd01hcmtlcik7XG5cbiAgICAgICAgICAgIHNldENvdW50cnkoY291bnRyeSk7XG4gICAgICAgICAgICBzZXRMb2NhdGlvbihsb2NhdGlvbik7XG4gICAgICAgICAgICBzZXREZXNjcmlwdGlvbihkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBzZXRSZWxvY2F0aW9uKHJlbG9jYXRpb24pO1xuICAgICAgICAgICAgc2V0TW9yZUluZm8obW9yZUluZm8pO1xuICAgICAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uQmFyKGdlbG9jQmxvY2ssIGRldGFpbCwgY2xvc2UpO1xuICAgICAgICB9KTtcblxuXG5cblxuICAgICAgICBQcm94aXN0b3JlLmVtLnN1YnNjcmliZShQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX0VSUk9SLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vUHJveGlzdG9yZS5sb2coXCJnZW9sb2NhdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuXG4gICAgICAgICAgICBpZiAoIW5vdGlmaWNhdGlvbkJhcilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhub3RpZmljYXRpb25CYXIuY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIGlmIChub3RpZmljYXRpb25CYXIuc3R5bGUuZGlzcGxheSAhPT0gJ2ZsZXgnICYmIG5vdGlmaWNhdGlvbkJhci5jbGFzc05hbWUgPT09ICdweHMtc2xpZGVPdXRSaWdodGNhblNob3cnIClcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBXaWRnZXQocGFyZW50RWxlbWVudElkKSB7XG4gICAgICAgIGNyZWF0ZVdpZGdldChwYXJlbnRFbGVtZW50SWQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVdpZGdldHMoKSB7XG4gICAgICAgIGlmIChQcm94aXN0b3JlLmNvbmZpZygpLndpZGdldElkcyAmJiBBcnJheS5pc0FycmF5KFByb3hpc3RvcmUuY29uZmlnKCkud2lkZ2V0SWRzKSAmJiBQcm94aXN0b3JlLmNvbmZpZygpLndpZGdldElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIFByb3hpc3RvcmUuY29uZmlnKCkuZ2VvTG9jYXRpb25DYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIFByb3hpc3RvcmUuZW0uc3Vic2NyaWJlKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fQ0hBTkdFRCwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvblJlc3RyaWN0ZWQgPSB7XCJ0eXBlXCI6IGV2ZW50LnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxvY2FsaXR5XCI6IGV2ZW50LmxvY2FsaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwb3N0YWxDb2RlXCI6IGV2ZW50LnBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvdW50cnlJc28yXCI6IGV2ZW50LmNvdW50cnlJc28yLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb3VudHJ5SXNvM1wiOiBldmVudC5jb3VudHJ5SXNvMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY291bnRyeVwiOiBldmVudC5jb3VudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXNxdWFsaWZpZWRcIjogZXZlbnQuZGlzcXVhbGlmaWVkfTtcbiAgICAgICAgICAgICAgICAgICAgUHJveGlzdG9yZS5jb25maWcoKS5nZW9Mb2NhdGlvbkNhbGxiYWNrKGxvY2F0aW9uUmVzdHJpY3RlZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBQcm94aXN0b3JlLmNvbmZpZygpLndpZGdldElkcy5mb3JFYWNoKGZ1bmN0aW9uICh3aWRnZXRJZCkge1xuICAgICAgICAgICAgICAgIG5ldyBXaWRnZXQod2lkZ2V0SWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgUHJveGlzdG9yZS5lbS5wdWJsaXNoKFByb3hpc3RvcmUuZW0uR0VPTE9DQVRJT05fUkVRVUVTVEVELCB7fSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSB0aGUgY29uZmlnIG1ldGhvZCB0byBnZXQgYSBjaGFuY2UgdG8gaW5pdGlhbGl6ZSB3aWRnZXRzXG4gICAgICogQHR5cGUge2NvbmZpZ3wqfVxuICAgICAqL1xuICAgIHZhciBvdmVycmlkZGVuQ29uZmlnID0gUHJveGlzdG9yZS5jb25maWc7XG4gICAgUHJveGlzdG9yZS5jb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICAgIHZhciBjID0gb3ZlcnJpZGRlbkNvbmZpZyhjZmcpO1xuICAgICAgICBpZiAoY2ZnKSB7XG4gICAgICAgICAgICBjcmVhdGVXaWRnZXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfTtcblxuICAgIHJldHVybiBQcm94aXN0b3JlO1xuXG59KFByb3hpc3RvcmUgfHwge30pKTsiLCIvKipcbiAqIFByb3hpc3RvcmUgZ2VvbG9jYXRpb24gQVBJXG4gKi9cbnZhciBQcm94aXN0b3JlID0gKGZ1bmN0aW9uIChQcm94aXN0b3JlKSB7XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBzZW50IHdoZW4gdGhlIGdlbyBsb2NhdGlvbiBoYXMgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3hpc3RvcmUuZW0sIFwiR0VPTE9DQVRJT05fQ0hBTkdFRFwiLCB7XG4gICAgICAgIHZhbHVlOiBcIkdFT0xPQ0FUSU9OX0NIQU5HRURcIixcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBzZW50IHdoZW4gdGhlIGdlbyBsb2NhdGlvbiBoYXMgZmFpbGVkXG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3hpc3RvcmUuZW0sIFwiR0VPTE9DQVRJT05fRVJST1JcIiwge1xuICAgICAgICB2YWx1ZTogXCJHRU9MT0NBVElPTl9FUlJPUlwiLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IHNlbnQgd2hlbiBhIGdlbyBsb2NhdGlvbiBpcyByZXF1ZXN0ZWQuXG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3hpc3RvcmUuZW0sIFwiR0VPTE9DQVRJT05fUkVRVUVTVEVEXCIsIHtcbiAgICAgICAgdmFsdWU6IFwiR0VPTE9DQVRJT05fUkVRVUVTVEVEXCIsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdmFyIGFqYXggPSBuZXcgUHJveGlzdG9yZS5BamF4KCk7XG5cbiAgICBmdW5jdGlvbiBMb2NhdGlvbih0eXBlLCBsb2NhbGl0eSwgcG9zdGFsQ29kZSwgY291bnRyeUlzbzIsIGNvdW50cnlJc28zLCBjb3VudHJ5LCBnZW9IYXNoLCBkaXNxdWFsaWZpZWQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5sb2NhbGl0eSA9IGxvY2FsaXR5O1xuICAgICAgICB0aGlzLnBvc3RhbENvZGUgPSBwb3N0YWxDb2RlO1xuICAgICAgICB0aGlzLmNvdW50cnlJc28yID0gY291bnRyeUlzbzI7XG4gICAgICAgIHRoaXMuY291bnRyeUlzbzMgPSBjb3VudHJ5SXNvMztcbiAgICAgICAgdGhpcy5jb3VudHJ5ID0gY291bnRyeTtcbiAgICAgICAgdGhpcy5kaXNxdWFsaWZpZWQgPSBkaXNxdWFsaWZpZWQ7XG4gICAgICAgIGlmIChnZW9IYXNoKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gR2VvaGFzaC5kZWNvZGUoZ2VvSGFzaCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBHZW8oKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXJzIGFuIEhUTUw1IGdlbyBsb2NhdGlvbiBpZiB0aGUgbmF2aWdhdG9yIGFsbG93cyBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGZvcmNlSHRtbDUgaWYgdHJ1ZSwgZGVsZXRlIGFsbCBjb29raWVzIHdpdGggaGlnaGVyIHByaW9yaXR5IHRoYW4gSFRNTDUgKE1BTlVBTClcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGh0bWw1R2VvbG9jYXRpb24oZm9yY2VIdG1sNSkge1xuICAgICAgICAgICAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUNvb2tpZUh0bWw1KCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjdXJhY3k6IHBvc2l0aW9uLmNvb3Jkcy5hY2N1cmFjeVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoaHRtbDVDb29raWVWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uQ2hhbmdlZChKU09OLnBhcnNlKGh0bWw1Q29va2llVmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFmb3JjZUh0bWw1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNvb2tpZU1hbnVhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbG9jYXRpb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHttYXhpbXVtQWdlOiAxMCAqIDYwICogMTAwMCwgdGltZW91dDogNjAwMDAsIGVuYWJsZUhpZ2hBY2N1cmFjeTogZmFsc2V9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpc3RlbiB0byBnZW8gbG9jYXRpb24gcmVxdWVzdCBldmVudHNcbiAgICAgICAgICpcbiAgICAgICAgICogTUFOVUFMIGdlbyBsb2NhdGlvblxuICAgICAgICAgKiBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIHsgbGF0aXR1ZGU6IDU1LCBsb25naXR1ZGU6IDIgfSlcbiAgICAgICAgICpcbiAgICAgICAgICogSFRNTDUgYXV0b21hdGljXG4gICAgICAgICAqIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX1JFUVVFU1RFRCwgeyAgfSlcbiAgICAgICAgICpcbiAgICAgICAgICogSFRNTDUgd2l0aCBkZWxldGlvbiBvZiBNQU5VQUwgY29va2llXG4gICAgICAgICAqIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX1JFUVVFU1RFRCwgeyBmb3JjZUh0bWw1IDogdHJ1ZSB9KVxuICAgICAgICAgKlxuICAgICAgICAgKiBTb21lIGJyb3dzZXJzIChtYWlubHkgU2FmYXJpKSBwcm9tcHRzIHRoZSB1c2VyIGFueXRpbWUgdGhlIGh0bWw1IGdlb2xvY2F0aW9uIGlzIHRyaWdnZXJlZCwgdW5sZXNzIHRoZSB1c2Vyc1xuICAgICAgICAgKiBleHBsaWNpdGx5IGFncmVlIHRvIHNoYXJlIGhpcyBsb2NhdGlvbiBmb3IgYSBwcmVkZWZpbmVkIHBlcmlvZCAoMSBkYXkgZm9yIHNhZmFyaSkuXG4gICAgICAgICAqIEluIG9yZGVyIHRvIGF2b2lkIHRoZSBIVE1MNSBwb3B1cCBkaWFsb2csIGlmIHRoZSB1c2VyIGFscmVhZHkgaGF2ZSBhbiBIVE1MNSBjb29raWUsIHdlIGRvIG5vdCB0cmlnZ2VyIHRoZSBIVE1MNVxuICAgICAgICAgKiBnZW9sb2NhdGlvbi4gSXQgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHRyaWdnZXJlZCB3aGVuIHRoZSBjb29raWUgZXhwaXJlcyBvciBpZiBmb3JjZUh0bWw1IGZsYWcgaXMgdHJ1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgdGhlIEhUTUw1IGdlbyBsb2NhdGlvbiBoYXMgYmVlbiBkaXNhYmxlZCB2aWEgUHJveGlzdG9yZS5jb25maWcoIHsgZGlzYWJsZUh0bWw1R2VvTG9jYXRpb246IHRydWUgfSksIHRoZW4gdGhlXG4gICAgICAgICAqIElQIGZhbGxiYWNrIGdlbyBsb2NhdGlvbiBpcyB1c2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgUHJveGlzdG9yZS5lbS5zdWJzY3JpYmUoUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9SRVFVRVNURUQsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmxhdGl0dWRlICYmIGRhdGEubG9uZ2l0dWRlKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlQ29va2llTWFudWFsKGRhdGEpLnRoZW4oZnVuY3Rpb24gKG1hbnVhbENvb2tpZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uQ2hhbmdlZChKU09OLnBhcnNlKG1hbnVhbENvb2tpZVZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGlmICghIWRhdGEuZm9yY2VIdG1sNSkge1xuICAgICAgICAgICAgICAgICAgICBodG1sNUdlb2xvY2F0aW9uKGRhdGEuZm9yY2VIdG1sNSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZCgpLnRoZW4oZnVuY3Rpb24gKGNvb2tpZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29va2llID0gSlNPTi5wYXJzZShjb29raWVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9sb2NhdGlvbkNoYW5nZWQoY29va2llKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghUHJveGlzdG9yZS5jb25maWcoKS5kaXNhYmxlSHRtbDVHZW9Mb2NhdGlvbiAmJiBjb29raWUuZ2VvQ29va2llVHlwZSA9PT0gXCJJUFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDVHZW9sb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBIVE1MNSBjb29raWVcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyB7IGxhdGl0dWRlOiAxLCBsb25naXR1ZGU6IDEsIGFjY3VyYWN5OiAxLCBmb3JjZUh0bWw1OiB0cnVlL2ZhbHNlIH1cbiAgICAgICAgICogQHJldHVybnMgYSBQcm9taXNlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb29raWVIdG1sNShwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi9jb29raWUvZ2VvL2h0bWw1P1wiO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpe1xuICAgICAgICAgICAgICAgIHVybCArPSBuYW1lICsgXCI9XCIgKyBwYXJhbXNbbmFtZV0gKyBcIiZcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXJsICs9IFwiMT0xXCI7XG4gICAgICAgICAgICByZXR1cm4gYWpheC5wb3N0KHVybCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG1hbnVhbCBjb29raWVcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyB7IGxhdGl0dWRlOiAxLCBsb25naXR1ZGU6IDEsIGFjY3VyYWN5OiAxLCBjb3VudHJ5OiBjb3VudHJ5LCBjb3VudHJ5Y29kZTI6IGNvdW50cnlDb2RlMiwgbG9jYWxpdHk6IGxvY2FsaXR5LCBwb3N0YWxDb2RlOiBwb3N0YWxDb2RlIH1cbiAgICAgICAgICogQHBhcmFtIGxvbmdpdHVkZVxuICAgICAgICAgKiBAcmV0dXJucyBhIFByb21pc2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNvb2tpZU1hbnVhbChwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi9jb29raWUvZ2VvL21hbnVhbD9cIjtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgICAgICAgICB1cmwgKz0gbmFtZSArIFwiPVwiICsgcGFyYW1zW25hbWVdICsgXCImXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHVybCArPSBcIjE9MVwiO1xuICAgICAgICAgICAgcmV0dXJuIGFqYXgucG9zdCh1cmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlYWRzIHRoZSBiZXN0IGdlbyBjb29raWUuXG4gICAgICAgICAqIFdhcm5pbmchIFRoaXMgaXMgdXNlZCBieSB0aGUgd2lkZ2V0LCBhbmQgdGh1cyB0aGUgc2VydmVyIEFQSSBpcyBibG9ja2VkIGJ5IGRlZmF1bHQuIE9ubHkgdGhlIHJlZmVycmVycyBwcmVzZW50IGluIHRoZSB3aGl0ZWxpc3QgY2FuIHF1ZXJ5IGl0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJuIGEgUHJvbWlzZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVhZCgpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi93aWRnZXQvZ2VvXCI7XG4gICAgICAgICAgICByZXR1cm4gYWpheC5nZXQodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWxldGVzIHRoZSBNQU5VQUwgZ2VvIGNvb2tpZS5cbiAgICAgICAgICogQHJldHVybiBhIFByb21pc2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUNvb2tpZU1hbnVhbCgpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RWZXJzaW9uZWRVcmwgKyBcIi9jb29raWUvZ2VvL21hbnVhbFwiO1xuICAgICAgICAgICAgcmV0dXJuIGFqYXguZGVsZXRlKHVybCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTm90aWZpZXMgdGhhdCBnZW8gbG9jYXRpb24gaGFzIGNoYW5nZWRcbiAgICAgICAgICogQHBhcmFtIGNvb2tpZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2VvbG9jYXRpb25DaGFuZ2VkKGNvb2tpZSkge1xuICAgICAgICAgICAgLy8gVE9ETyAtIFBYUC0zMDAgRmlsdGVyIHB1Ymxpc2hlZCBkYXRhXG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBuZXcgTG9jYXRpb24oXG4gICAgICAgICAgICAgICAgY29va2llLmdlb0Nvb2tpZVR5cGUsXG4gICAgICAgICAgICAgICAgY29va2llLmxvY2FsaXR5LFxuICAgICAgICAgICAgICAgIGNvb2tpZS5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGNvb2tpZS5jb3VudHJ5SXNvMixcbiAgICAgICAgICAgICAgICBjb29raWUuY291bnRyeUlzbzMsXG4gICAgICAgICAgICAgICAgY29va2llLmNvdW50cnksXG4gICAgICAgICAgICAgICAgY29va2llLmdlb0hhc2gsXG4gICAgICAgICAgICAgICAgY29va2llLmRpc3F1YWxpZmllZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFByb3hpc3RvcmUuZW0ucHVibGlzaChQcm94aXN0b3JlLmVtLkdFT0xPQ0FUSU9OX0NIQU5HRUQsIGxvY2F0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb3RpZmllcyB0aGF0IGdlbyBsb2NhdGlvbiBmYWlsZWRcbiAgICAgICAgICogQHBhcmFtIGVycm9yXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZW9sb2NhdGlvbkVycm9yKGVycm9yKSB7XG4gICAgICAgICAgICBQcm94aXN0b3JlLmVtLnB1Ymxpc2goUHJveGlzdG9yZS5lbS5HRU9MT0NBVElPTl9FUlJPUiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3IEdlbygpO1xuXG4gICAgcmV0dXJuIFByb3hpc3RvcmVcblxufShQcm94aXN0b3JlIHx8IHt9KSk7IiwiLyoqXG4gKiBBdHRhY2ggYW4gQWpheCBDbGFzcyB0byB0aGUgUHJveGlzdG9yZSBuYW1lc3BhY2UuXG4gKlxuICogR0VULFBPU1QsIFBVVCBhbmQgREVMRVRFIGFyZSBjdXJyZW50bHkgaW1wbGVtZW50ZWQuXG4gKlxuICogQWxsIG1ldGhvZHMgcmV0dXJuIFByb21pc2UgYW5kIGd1YXJhbnRlZSB0aGF0IGNvb2tpZXMgd2lsbCBiZSBzZW50LlxuICogSFRUUCBzdGF0dXMgY29kZSBpbiB0aGUgcmFuZ2UgMjAwLTI5OSB3aWxsIGJlIGNvbnNpZGVyZWQgYXMgc3VjY2Vzc2Z1bC5cbiAqL1xudmFyIFByb3hpc3RvcmUgPSAoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcblxuICAgIGZ1bmN0aW9uIEFqYXgoKSB7XG5cbiAgICAgICAgZnVuY3Rpb24gYWpheCh1cmwsIG1ldGhvZCwgZGF0YSkge1xuICAgICAgICAgICAgLy9Qcm94aXN0b3JlLmxvZyhcIkFKQVggLVwiLCBtZXRob2QsIHVybCwgZGF0YSB8fCBcIlwiKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoRXJyb3IocmVxdWVzdC5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KEVycm9yKFwiTmV0d29yayBFcnJvclwiKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKHVybCkgeyByZXR1cm4gYWpheCh1cmwsIFwiR0VUXCIpOyB9O1xuICAgICAgICB0aGlzLnBvc3QgPSBmdW5jdGlvbih1cmwsIGRhdGEpIHsgcmV0dXJuIGFqYXgodXJsLCBcIlBPU1RcIiwgZGF0YSk7IH07XG4gICAgICAgIHRoaXMucHV0ID0gZnVuY3Rpb24odXJsLCBkYXRhKSB7IHJldHVybiBhamF4KHVybCwgXCJQVVRcIiwgZGF0YSk7IH07XG4gICAgICAgIHRoaXMuZGVsZXRlID0gZnVuY3Rpb24odXJsLCBkYXRhKSB7IHJldHVybiBhamF4KHVybCwgXCJERUxFVEVcIiwgZGF0YSk7IH07XG5cbiAgICB9XG5cbiAgICBQcm94aXN0b3JlLkFqYXggPSBBamF4O1xuXG4gICAgcmV0dXJuIFByb3hpc3RvcmVcblxufShQcm94aXN0b3JlIHx8IHt9KSk7IiwiLyoqXG4gKiBBdHRhY2ggYSBnbG9iYWwgZXZlbnQgbWFuYWdlciB0byB0aGUgUHJveGlzdG9yZSBuYW1lc3BhY2UuXG4gKlxuICogdmFyIGhhbmRsZXIgPSAgZnVuY3Rpb24oZXZlbnQpIHsgY29uc29sZS5sb2coXCJldmVudFwiLCBldmVudCl9O1xuICogUHJveGlzdG9yZS5lbS5zdWJzY3JpYmUoXCJFVkVOVDFcIiwgaGFuZGxlcik7XG4gKiBQcm94aXN0b3JlLmVtLnB1Ymxpc2goXCJFVkVOVDFcIiwgeyBcImFcIjogXCJiXCJ9KVxuICogUHJveGlzdG9yZS5lbS51bnN1YnNjcmliZShcIkVWRU5UMVwiLCBoYW5kbGVyKTtcbiAqL1xudmFyIFByb3hpc3RvcmUgPSAoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcblxuICAgIGZ1bmN0aW9uIEV2ZW50TWFuYWdlcigpIHtcbiAgICAgICAgdmFyIGV2ZW50cyA9IHt9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQdWJsaXNoIGFuIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSBuYW1lIHRoZSBldmVudCdzIG5hbWVcbiAgICAgICAgICogQHBhcmFtIGRhdGEgdGhlIGV2ZW50J3MgZGF0YVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wdWJsaXNoID0gZnVuY3Rpb24obmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdO1xuICAgICAgICAgICAgaWYoISFoYW5kbGVycyA9PT0gZmFsc2UpIHJldHVybjtcbiAgICAgICAgICAgIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdWJzY3JpYmUgYSBoYW5kbGVyIGZvciBhIHNwZWNpZmljIHR5cGUgb2YgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIG5hbWUgdGhlIGV2ZW50J3MgbmFtZVxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciB0aGUgZXZlbnQncyBoYW5kbGVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uKG5hbWUsIGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGVycyA9IGV2ZW50c1tuYW1lXTtcbiAgICAgICAgICAgIGlmKCEhaGFuZGxlcnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcnMgPSBldmVudHNbbmFtZV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoYW5kbGVySWR4ID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVySWR4ID09PSAtMSkgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVW5zdWJzY3JpYmUgYSBoYW5kbGVyIGZvciBhIHNwZWNpZmljIHR5cGUgb2YgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIG5hbWUgdGhlIGV2ZW50J3MgbmFtZVxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciB0aGUgZXZlbnQncyBoYW5kbGVyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24obmFtZSwgaGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gZXZlbnRzW25hbWVdO1xuICAgICAgICAgICAgaWYoISFoYW5kbGVycyA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGhhbmRsZXJJZHggPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJJZHggIT09IC0xKSBoYW5kbGVycy5zcGxpY2UoaGFuZGxlcklkeCk7XG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICBQcm94aXN0b3JlLmVtID0gbmV3IEV2ZW50TWFuYWdlcigpO1xuXG4gICAgcmV0dXJuIFByb3hpc3RvcmVcblxufShQcm94aXN0b3JlIHx8IHt9KSk7IiwidmFyIFByb3hpc3RvcmUgPSAoZnVuY3Rpb24gKFByb3hpc3RvcmUpIHtcblxuICAgIC8vUG9seWZpbGxcbiAgICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBNdXN0IGJlIHdyaXRhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QsIFwiYXNzaWduXCIsIHtcbiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgdmFyQXJncykgeyAvLyAubGVuZ3RoIG9mIGZ1bmN0aW9uIGlzIDJcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCkgeyAvLyBUeXBlRXJyb3IgaWYgdW5kZWZpbmVkIG9yIG51bGxcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICBcbiAgICAgICAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICBcbiAgICAgICAgICAgICAgaWYgKG5leHRTb3VyY2UgIT0gbnVsbCkgeyAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGJ1Z3Mgd2hlbiBoYXNPd25Qcm9wZXJ0eSBpcyBzaGFkb3dlZFxuICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG87XG4gICAgICAgICAgfSxcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgICAgIGFwaVJvb3Q6IFwiLy9hYnMucHJveGlzdG9yZS5jb21cIixcbiAgICAgICAgYXBpVmVyc2lvbjogXCJ2M1wiLFxuICAgICAgICBsYW5ndWFnZTogXCJmclwiLFxuICAgICAgICBkaXNhYmxlSHRtbDVHZW9Mb2NhdGlvbjogZmFsc2UsXG4gICAgICAgIGdvb2dsZUFwaUtleTogXCJBSXphU3lEWHBMMk9EdjNfNy14MFdoaVBtc3BCRW5IZElSbEJXbzhcIixcbiAgICAgICAgZ2VvTG9jYXRpb25DYWxsYmFjazogbmV3IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB9LFxuICAgICAgICBkYXJrVGhlbWU6IGZhbHNlLFxuICAgICAgICBjdXN0b21DbGFzc05hbWU6IG51bGwsXG4gICAgICAgIHdpZGdldElkczogW10sXG4gICAgICAgIHNob3J0V2lkZ2V0SWRzOiBbXSxcbiAgICAgICAgdmVyYm9zZTogZmFsc2VcbiAgICB9O1xuICAgIF9kZWZhdWx0cy5hcGlSb290VXJsID0gIF9kZWZhdWx0cy5hcGlSb290ICsgXCIvXCIgKyBfZGVmYXVsdHMubGFuZ3VhZ2U7XG4gICAgX2RlZmF1bHRzLmFwaVJvb3RWZXJzaW9uZWRVcmwgPSAgX2RlZmF1bHRzLmFwaVJvb3RVcmwgKyBcIi9cIiArIF9kZWZhdWx0cy5hcGlWZXJzaW9uO1xuXG4gICAgdmFyIF9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBfZGVmYXVsdHMpO1xuXG4gICAgLyoqXG4gICAgICogU3RhcnQgUHJveGlzdG9yZSBlbmdpbmUgd2l0aCB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbi5cbiAgICAgKiBBbGwgbWlzc2luZyBjb25maWd1cmF0aW9uIHdpbGwgZ2V0IGRlZmF1bHRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNmZ1xuICAgICAqIEByZXR1cm4gdGhlIGNvbmZpZ3VyYXRpb24gY29tcGxldGVkIHdpdGggZGVmYXVsdHMgZm9yIG1pc3NpbmcgdmFsdWVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29uZmlnKGNmZykge1xuICAgICAgICBpZiAoY2ZnKSB7XG4gICAgICAgICAgICAvLyBDYWxsZWQgb25seSBvbmNlIGR1cmluZyBpbml0aWFsaXphdGlvbiBvZiBQcm94aXN0b3JlIGVuZ2luZVxuICAgICAgICAgICAgX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oX2NvbmZpZywgY2ZnKTtcbiAgICAgICAgICAgIGlmICghX2NvbmZpZy5sYW5ndWFnZS5tYXRjaChcImZyfG5sfGVzXCIpKSB7XG4gICAgICAgICAgICAgICAgX2NvbmZpZy5hcGlSb290VXJsID0gIF9jb25maWcuYXBpUm9vdCArIFwiL1wiICsgX2RlZmF1bHRzLmxhbmd1YWdlO1xuICAgICAgICAgICAgICAgIF9jb25maWcuYXBpUm9vdFZlcnNpb25lZFVybCA9ICBfY29uZmlnLmFwaVJvb3RVcmwgKyBcIi9cIiArIF9jb25maWcuYXBpVmVyc2lvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX2NvbmZpZy5hcGlSb290VXJsID0gIF9jb25maWcuYXBpUm9vdCArIFwiL1wiICsgX2NvbmZpZy5sYW5ndWFnZTtcbiAgICAgICAgICAgICAgICBfY29uZmlnLmFwaVJvb3RWZXJzaW9uZWRVcmwgPSAgX2NvbmZpZy5hcGlSb290VXJsICsgXCIvXCIgKyBfY29uZmlnLmFwaVZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9jb25maWc7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDb25zb2xlIGxvZyB0aGF0IGNhbiBiZSBkaXNhYmxlZCB3aXRoIHRoZSBjb25maWcgdmFyaWFibGUgICB7IHZlcmJvc2UgOiB0cnVlIH1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBsb2coKSB7XG4gICAgICAgIGlmIChfY29uZmlnLnZlcmJvc2UpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGFyZ3Muc3BsaWNlKDAsIDAsIFwiUFJPWElTVE9SRSAtXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBQcm94aXN0b3JlLmNvbmZpZyA9IGNvbmZpZztcbiAgICBQcm94aXN0b3JlLmxvZyA9IGxvZztcblxuXG4gICAgcmV0dXJuIFByb3hpc3RvcmU7XG59KShQcm94aXN0b3JlIHx8IHt9KTsiLCJ2YXIgUHJveGlzdG9yZSA9IChmdW5jdGlvbiAoUHJveGlzdG9yZSkge1xuXG4gICAgZnVuY3Rpb24gbG9hZENTUyhocmVmKSB7XG4gICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0gfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvY3NzXCIpO1xuICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XG4gICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKGxpbmssIGhlYWQuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGl4ZWxDb3VudGVyRGl2KHB1Ymxpc2hlclNwb3RJZCwgYm94SWQpIHtcbiAgICAgICAgdmFyIGJveFBvc2l0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm94SWQpO1xuICAgICAgICB2YXIgcGl4ZWxDb3VudGVyRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcy1waXhlbENvdW50ZXItXCIgKyBwdWJsaXNoZXJTcG90SWQpO1xuXG4gICAgICAgIGlmIChwaXhlbENvdW50ZXJEaXYgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB2YXIgcGl4ZWxDb3VudGVyX2Rpdl9pZCA9IGNyZWF0ZUF0dHJpYnV0ZShcImlkXCIsIFwicHMtcGl4ZWxDb3VudGVyLVwiICsgcHVibGlzaGVyU3BvdElkKTtcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckRpdi5zZXRBdHRyaWJ1dGVOb2RlKHBpeGVsQ291bnRlcl9kaXZfaWQpO1xuICAgICAgICAgICAgdmFyIHBpeGVsQ291bnRlcl9kaXZfY2xhc3MgPSBjcmVhdGVBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBzLXBpeGVsQ291bnRlclwiKTtcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckRpdi5zZXRBdHRyaWJ1dGVOb2RlKHBpeGVsQ291bnRlcl9kaXZfY2xhc3MpO1xuICAgICAgICAgICAgdmFyIHBpeGVsQ291bnRlcl9kaXZfc3R5bGUgPSBjcmVhdGVBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6bm9uZVwiKTtcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckRpdi5zZXRBdHRyaWJ1dGVOb2RlKHBpeGVsQ291bnRlcl9kaXZfc3R5bGUpO1xuICAgICAgICAgICAgYm94UG9zaXRpb24uYXBwZW5kQ2hpbGQocGl4ZWxDb3VudGVyRGl2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwaXhlbENvdW50ZXJEaXY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkUGl4ZWxDb3VudGVySW1nKHBpeGVsQ291bnRlckRpdiwgcGl4ZWxDb3VudGVySW1nVXJsKSB7XG4gICAgICAgIGlmIChwaXhlbENvdW50ZXJJbWdVcmwuc2VhcmNoKCdcXFxcPycpID09PSAtMSkge1xuICAgICAgICAgICAgcGl4ZWxDb3VudGVySW1nVXJsID0gcGl4ZWxDb3VudGVySW1nVXJsICsgJz9wc192PScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBpeGVsQ291bnRlckltZ1VybCA9IHBpeGVsQ291bnRlckltZ1VybCArICcmcHNfdj0nICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGl4ZWxDb3VudGVyX2ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIHZhciBwaXhlbENvdW50ZXJfaW1nX3NyYyA9IGNyZWF0ZUF0dHJpYnV0ZShcInNyY1wiLCBwaXhlbENvdW50ZXJJbWdVcmwpO1xuICAgICAgICBwaXhlbENvdW50ZXJfaW1nLnNldEF0dHJpYnV0ZU5vZGUocGl4ZWxDb3VudGVyX2ltZ19zcmMpO1xuICAgICAgICBwaXhlbENvdW50ZXJEaXYuYXBwZW5kQ2hpbGQocGl4ZWxDb3VudGVyX2ltZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGUgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIGF0dHJpYnV0ZS52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZFBpeGVsQ291bnRlcihwdWJsaXNoZXJTcG90SWQsIGJveElkLCBwaXhlbENvdW50ZXJJbWdVcmxzKSB7XG4gICAgICAgIHZhciBwaXhlbENvdW50ZXJEaXYgPSBnZXRQaXhlbENvdW50ZXJEaXYocHVibGlzaGVyU3BvdElkLCBib3hJZCk7XG5cbiAgICAgICAgaWYgKHBpeGVsQ291bnRlckltZ1VybHMuY29uc3RydWN0b3IgIT09IEFycmF5KSB7XG4gICAgICAgICAgICBhZGRQaXhlbENvdW50ZXJJbWcocGl4ZWxDb3VudGVyRGl2LCBwaXhlbENvdW50ZXJJbWdVcmxzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBwaXhlbENvdW50ZXJJbWdVcmxzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgICAgIGFkZFBpeGVsQ291bnRlckltZyhwaXhlbENvdW50ZXJEaXYsIHBpeGVsQ291bnRlckltZ1VybHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUFkKHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCwgYm94SWQsIGFkdmVydGlzZW1lbnQsIHN1cmZlckRhdGEpIHtcbiAgICAgICAgdmFyIGJveFBvc2l0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm94SWQpO1xuICAgICAgICBjbGVhckludGVydmFsKHdpbmRvd1sncHNfaW50ZXJ2YWxfJyArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0pO1xuICAgICAgICBib3hQb3NpdGlvbi5zdHlsZS53aWR0aCA9IGFkdmVydGlzZW1lbnQud2lkdGggKyBcInB4XCI7XG4gICAgICAgIGJveFBvc2l0aW9uLnN0eWxlLmhlaWdodCA9IGFkdmVydGlzZW1lbnQuaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBzLWFkLWltZy1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCkuc3JjID0gYWR2ZXJ0aXNlbWVudC51cmxWaXN1YWxzWzBdO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBzLWFkLVwiICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKS5ocmVmID0gYWR2ZXJ0aXNlbWVudC51cmxSZWRpcmVjdGlvbjtcblxuICAgICAgICBpZiAoYWR2ZXJ0aXNlbWVudC51cmxWaXN1YWxzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHdpbmRvd1sncHNfdmlzdWFsSWR4XycgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWRdID0gMTtcbiAgICAgICAgICAgIHdpbmRvd1sncHNfaW50ZXJ2YWxfJyArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcy1hZC1pbWctXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpLnNyYyA9IGFkdmVydGlzZW1lbnQudXJsVmlzdWFsc1t3aW5kb3dbJ3BzX3Zpc3VhbElkeF8nICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkXV07XG4gICAgICAgICAgICAgICAgd2luZG93Wydwc192aXN1YWxJZHhfJyArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gPSAod2luZG93Wydwc192aXN1YWxJZHhfJyArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gKyAxKSAlIGFkdmVydGlzZW1lbnQudXJsVmlzdWFscy5sZW5ndGg7XG4gICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGV4dGVybmFsaXplIGRlbGF5IC0gR2V0IGEgZGVsYXkgcGVyIGltYWdlP1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWR2ZXJ0aXNlbWVudC51cmxQaXhlbENvdW50ZXJzKSBhZHZlcnRpc2VtZW50LnVybFBpeGVsQ291bnRlcnMgPSBbXCJcIl07XG4gICAgICAgIGlmIChhZHZlcnRpc2VtZW50LnVybFBpeGVsQ291bnRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYWRkUGl4ZWxDb3VudGVyKGFkZFBpeGVsQ291bnRlciwgYm94SWQsIGFkdmVydGlzZW1lbnQudXJsUGl4ZWxDb3VudGVycylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0YXJ0SW5mb2JveFRyYW5zaXRpb24ocHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKSB7XG4gICAgICAgIHZhciBwaWN0byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtcGljdG8tXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpO1xuICAgICAgICB3aW5kb3dbXCJwc19pbmZvYm94VGltZW91dF9cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHBpY3RvLmNsaWNrKCk7XG4gICAgICAgICAgICB3aW5kb3dbXCJwc19pbmZvYm94VGltZW91dF9cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZF0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwaWN0by5jbGljaygpO1xuICAgICAgICAgICAgfSwgNDAwMCk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50IHRvIHJlZ2lzdGVyIGFkdmVydGlzZW1lbnQgY2xpY2sgb24gcHJveGlzdG9yZSBiYWNrZW5kXG4gICAgICogQHBhcmFtIGhhbmRsZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRBZHZlcnRpc2VtZW50Q2xpY2tIYW5kbGVyKGFkdmVydGlzZW1lbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcy1hZC1cIiArIGFkdmVydGlzZW1lbnQucHVibGlzaGVyU3BvdC5wdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpO1xuICAgICAgICBhZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50cyB0byBvcGVuL2Nsb3NlIHRoZSBpbmZvYm94XG4gICAgICogQHBhcmFtIGFkdmVydGlzZW1lbnRcbiAgICAgKiBAcGFyYW0gaW5mb0JveE9yaWVudGF0aW9uXG4gICAgICogQHBhcmFtIGNsaWNrSGFuZGxlclxuICAgICAqIEBwYXJhbSBtb3VzZU92ZXJIYW5kbGVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkUGljdG9IYW5kbGVycyhhZHZlcnRpc2VtZW50LCBpbmZvQm94T3JpZW50YXRpb24sIGNsaWNrSGFuZGxlciwgbW91c2VPdmVySGFuZGxlcikge1xuICAgICAgICAvLyBFdmVudCB0byBvcGVuL2Nsb3NlIHRoZSBpbmZvYm94XG4gICAgICAgIHZhciBwaWN0byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHMtcGljdG8tXCIgKyBhZHZlcnRpc2VtZW50LnB1Ymxpc2hlclNwb3QucHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkKTtcbiAgICAgICAgcGljdG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0hhbmRsZXIpO1xuXG4gICAgICAgIC8vIEV2ZW50IHRvIHJlb3BlbiB0aGUgY2xvc2luZyBpbmZvYm94XG4gICAgICAgIHZhciBpbmZvQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcy1pbmZvYm94LVwiICsgYWR2ZXJ0aXNlbWVudC5wdWJsaXNoZXJTcG90LnB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCk7XG4gICAgICAgIGluZm9Cb3guYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgbW91c2VPdmVySGFuZGxlcik7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBtYW5hZ2VJbmZvQm94KHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCwgaW5mb0JveE9yaWVudGF0aW9uLCBmb3JjZUV4cGFuZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQod2luZG93W1wicHNfaW5mb2JveFRpbWVvdXRfXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWRdKTtcbiAgICAgICAgdmFyIGluZm9Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBzLWluZm9ib3gtXCIgKyBwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpO1xuXG4gICAgICAgIGlmIChpbmZvQm94T3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCBpbmZvQm94XG4gICAgICAgICAgICBpbmZvQm94LnN0eWxlLndpZHRoID0gaW5mb0JveC5jbGllbnRXaWR0aCA9PT0gMCB8fCBmb3JjZUV4cGFuZCA/IFwiMjUwcHhcIiA6IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBWZXJ0aWNhbCBpbmZvQm94XG4gICAgICAgICAgICBpbmZvQm94LnN0eWxlLndpZHRoID0gaW5mb0JveC5jbGllbnRXaWR0aCA9PT0gMCB8fCBmb3JjZUV4cGFuZCA/IFwiMTE2cHhcIiA6IDA7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIFByb3hpc3RvcmUuYm94ID0gZnVuY3Rpb24gKGFkdmVydGlzZW1lbnQsIGRlYWxJZCwgYm94SWQsIHZpZXdQdXRVcmwpIHtcbiAgICAgICAgdmFyIGFqYXggPSBuZXcgUHJveGlzdG9yZS5BamF4KCk7XG5cbiAgICAgICAgaWYgKGRlYWxJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYWpheC5wdXQoUHJveGlzdG9yZS5jb25maWcoKS5hcGlSb290VmVyc2lvbmVkVXJsICsgXCIvcnRiL3ByZWJpZC92aWV3ZWQ/ZGVhbElkPVwiICsgZGVhbElkKTtcbiAgICAgICAgfSBlbHNlIGlmICh2aWV3UHV0VXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFqYXgucHV0KHZpZXdQdXRVcmwpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9hZENTUyhQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3QgKyBcIi9hc3NldHMvY3NzL3Byb3hpc3RvcmUubWluLmNzc1wiKTtcblxuICAgICAgICB2YXIgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkID0gYWR2ZXJ0aXNlbWVudC5wdWJsaXNoZXJTcG90LnB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZDtcbiAgICAgICAgdmFyIGluZm9Cb3hPcmllbnRhdGlvbiA9IFwiaG9yaXpvbnRhbFwiO1xuXG4gICAgICAgIHZhciAkcHNfYm94X2NvZGUgPSBcIlwiICtcbiAgICAgICAgICAgIFwiPHNwYW4gaWQ9J3BzLXBpY3RvLVwiICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkICsgXCInIGNsYXNzPSdwcy1waWN0byBcIiArIGluZm9Cb3hPcmllbnRhdGlvbiArIFwiJz5cIiArXG4gICAgICAgICAgICBcIiAgIDxzdmcgdmlld0JveD0nMCAwIDE1MDAgMTUwMCcgd2lkdGg9JzAnPjxwYXRoIGQ9J003NTAsMTUwMGE0MS43LDQxLjcsMCwwLDEtNDAuNTMtMzEuODhMNTgyLjQ3LDk0MWE0ODMuMDYsNDgzLjA2LDAsMCwxLTU1LjE5LTI0LjMzLDQ3My43NCw0NzMuNzQsMCwwLDEtNzIuMDktNDUuNzdDMzM0LjEyLDc3OC4yOSwyNjQuNjEsNjM3Ljc2LDI2NC42MSw0ODUuMzljMC0xMjkuNzMsNTAuNDktMjUxLjYzLDE0Mi4xNi0zNDMuMjVTNjIwLjQsMCw3NTAsMHMyNTEuNSw1MC40NywzNDMuMjYsMTQyLjE0LDE0Mi4xNiwyMTMuNTksMTQyLjE2LDM0My4yNUE0ODYuMTQsNDg2LjE0LDAsMCwxLDEyMTUsNjI1LDQ4Niw0ODYsMCwwLDEsOTE3LjUsOTQxbC0xMjcsNTI3LjExQTQxLjcxLDQxLjcxLDAsMCwxLDc1MCwxNTAwWk03NTAsOTAuMjJjLTEwNS40OSwwLTIwNC43MSw0MS4xMi0yNzkuMzcsMTE1Ljc3UzM1NC44OCwzNzkuOTIsMzU0Ljg4LDQ4NS4zOWMwLDEyNCw1Ni41OSwyMzguNDQsMTU1LjI0LDMxMy45MWEzOTAuNzYsMzkwLjc2LDAsMCwwLDEyMy42MSw2My44MmMxNC4wNSw0LjMyLDI2LjY4LDE2LjI0LDMwLjE2LDMwLjUyTDc1MCwxMjUxbDg1LjU5LTM1NS4zMmMwLS4yLjYxLTIuMzMuNjUtMi41MWE0MS42Myw0MS42MywwLDAsMSwyOC40Mi0yOS42MmMxMDUuNjUtMzIuNDYsMTkyLjg1LTEwNy4xNCwyNDAuNzYtMjA1LjM0QTQwMC4zNiw0MDAuMzYsMCwwLDAsMTEyOC41Niw1OTlhMzk2LjM1LDM5Ni4zNSwwLDAsMCwxNi41OC0xMTEuMzJjMC0uNzctLjA3LTEuNTItLjA3LTIuMjhzMC0xLjUxLjA3LTIuMjhBMzkyLjQsMzkyLjQsMCwwLDAsMTAyOS4zOSwyMDZDOTU0LjcxLDEzMS4zNCw4NTUuNDksOTAuMjIsNzUwLDkwLjIyWicvPjxwYXRoIGQ9J003NTAsNjYyLjI1Yy05OC42MSwwLTE3OC44NC04MC4yNC0xNzguODQtMTc4Ljg3UzY1MS4zNywzMDQuNTEsNzUwLDMwNC41MXMxNzguODksODAuMjQsMTc4Ljg5LDE3OC44N1M4NDguNjEsNjYyLjI1LDc1MCw2NjIuMjVabTAtMjc0LjM1YTk1LjQ4LDk1LjQ4LDAsMSwwLDk1LjQ5LDk1LjQ5QTk1LjU4LDk1LjU4LDAsMCwwLDc1MCwzODcuODlaJy8+PC9zdmc+XCIgK1xuICAgICAgICAgICAgXCI8L3NwYW4+XCIgK1xuXG4gICAgICAgICAgICBcIjxzcGFuIGlkPSdwcy1pbmZvYm94LVwiICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkICsgXCInIGNsYXNzPSdwcy1pbmZvYm94IFwiICsgaW5mb0JveE9yaWVudGF0aW9uICsgXCInPlwiICtcbiAgICAgICAgICAgIFwiICAgPHNwYW4gY2xhc3M9J3BzLWxvY2F0aW9uIFwiICsgaW5mb0JveE9yaWVudGF0aW9uICsgXCInPlwiICtcbiAgICAgICAgICAgIFwiICAgICAgIDxzdmcgdmlld0JveD0nMCAwIDEwOS4zMiAxMDkuMzInIHdpZHRoPScwJz48cGF0aCBkPSdNMTA4LjE0LDEuMThhNCw0LDAsMCwwLTQuNDUtLjg0TDIuNDEsNDQuNUE0LDQsMCwwLDAsMi45LDUyTDQ1LDY0LjM0bDEyLjI5LDQyLjA4YTQsNCwwLDAsMCwzLjYxLDIuODloLjI2YTQsNCwwLDAsMCwzLjY5LTIuNDFMMTA5LDUuNjNBNCw0LDAsMCwwLDEwOC4xNCwxLjE4WicvPjwvc3ZnPlwiICtcbiAgICAgICAgICAgIFwiICAgICAgIDxhIGNsYXNzPSdwcy1jaXR5IFwiICsgaW5mb0JveE9yaWVudGF0aW9uICsgXCInIGhyZWY9J1wiICsgYWR2ZXJ0aXNlbWVudC5yZWxvY2FsaXNhdGlvblVybCArIFwiJyB0YXJnZXQ9J19ibGFuayc+XCIgKyBhZHZlcnRpc2VtZW50LnN1cmZlckNpdHlOYW1lICsgXCI8L2E+XCIgK1xuICAgICAgICAgICAgXCIgICA8L3NwYW4+XCIgK1xuXG4gICAgICAgICAgICBcIiAgIDxzcGFuIGNsYXNzPSdwcy1hY3Rpb25zIFwiICsgaW5mb0JveE9yaWVudGF0aW9uICsgXCInPlwiICtcblxuICAgICAgICAgICAgLy8gVE9ETzogP211bHRpcGxlIGFkdmVydGlzZW1lbnQ/XG5cbiAgICAgICAgICAgIFwiICAgICAgIDxhIGlkPSdwcy1zdG9yZS1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCArIFwiJyBjbGFzcz0ncHMtc3RvcmUgXCIgKyBpbmZvQm94T3JpZW50YXRpb24gKyBcIicgdGFyZ2V0PSdfYmxhbmsnPlwiICtcbiAgICAgICAgICAgIFwiICAgICAgICAgICA8c3ZnIHZpZXdCb3g9JzAgMCA1MjUuMTYgNTI1LjE2JyB3aWR0aD0nMCc+PHBhdGggZD0nTTUxNy40NywyNDQuMDcsMjgxLjA5LDcuNjhhMjYuMTIsMjYuMTIsMCwwLDAtMzcsMEw3LjY4LDI0NC4wN2EyNi4xMiwyNi4xMiwwLDAsMCwwLDM3TDI0NC4wOSw1MTcuNDdhMjYuMTIsMjYuMTIsMCwwLDAsMzcsMEw1MTcuNDksMjgxLjA3QzUyNy43MSwyNzEuMTUsNTI3LjcxLDI1NC41Miw1MTcuNDcsMjQ0LjA3Wk0zMTUsMzI4LjM1VjI2Mi42OUgyMDkuODl2NzguODRIMTU3LjM5VjIzNi40NWEyNi4zNCwyNi4zNCwwLDAsMSwyNi4yNC0yNi4yNkgzMTVWMTQ0LjU1bDkxLjksOTEuOVonLz48L3N2Zz5cIiArXG4gICAgICAgICAgICBcIiAgICAgICA8L2E+XCIgK1xuICAgICAgICAgICAgXCIgICA8L3NwYW4+XCIgK1xuICAgICAgICAgICAgXCI8L3NwYW4+XCIgK1xuXG4gICAgICAgICAgICBcIjxhIGlkPSdwcy1hZC1cIiArIHB1Ymxpc2hlclNwb3RSZWZlcmVuY2VJZCArIFwiJyBjbGFzcz0ncHMtYWQgXCIgKyBpbmZvQm94T3JpZW50YXRpb24gKyBcIicgdGFyZ2V0PSdfYmxhbmsnPlwiICtcbiAgICAgICAgICAgIFwiICAgPGltZyBpZD0ncHMtYWQtaW1nLVwiICsgcHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkICsgXCInIGNsYXNzPSdwcy1hZC1pbWcgXCIgKyBpbmZvQm94T3JpZW50YXRpb24gKyBcIic+XCIgK1xuICAgICAgICAgICAgXCI8L2E+XCI7XG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm94SWQpLmlubmVySFRNTCA9ICRwc19ib3hfY29kZTtcbiAgICAgICAgdXBkYXRlQWQocHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkLCBib3hJZCwgYWR2ZXJ0aXNlbWVudCwge2dlb1R5cGU6IFwiXCIsIGxhdGl0dWRlOiAwLCBsb25naXR1ZGU6IDB9KTtcbiAgICAgICAgc3RhcnRJbmZvYm94VHJhbnNpdGlvbihwdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQpO1xuXG4gICAgICAgIGFkZEFkdmVydGlzZW1lbnRDbGlja0hhbmRsZXIoYWR2ZXJ0aXNlbWVudCwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBhamF4LnB1dChQcm94aXN0b3JlLmNvbmZpZygpLmFwaVJvb3RVcmwgKyAgXCIvdGFncy9jbGljay9cIiArIGFkdmVydGlzZW1lbnQuYWR2ZXJ0aXNlbWVudElkLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIFwicHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkXCI6IGFkdmVydGlzZW1lbnQucHVibGlzaGVyU3BvdC5wdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQsXG4gICAgICAgICAgICAgICAgICAgIFwiY2FtcGFpZ25JZFwiOiBhZHZlcnRpc2VtZW50LmNhbXBhaWduSWRcbiAgICAgICAgICAgICAgICB9KSwgXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGRQaWN0b0hhbmRsZXJzKGFkdmVydGlzZW1lbnQsIGluZm9Cb3hPcmllbnRhdGlvbixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBtYW5hZ2VJbmZvQm94KGFkdmVydGlzZW1lbnQucHVibGlzaGVyU3BvdC5wdWJsaXNoZXJTcG90UmVmZXJlbmNlSWQsIGluZm9Cb3hPcmllbnRhdGlvbik7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbWFuYWdlSW5mb0JveChhZHZlcnRpc2VtZW50LnB1Ymxpc2hlclNwb3QucHVibGlzaGVyU3BvdFJlZmVyZW5jZUlkLCBpbmZvQm94T3JpZW50YXRpb24sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgfTtcblxuICAgIHJldHVybiBQcm94aXN0b3JlXG5cbn0oUHJveGlzdG9yZSB8fCB7fSkpO1xuXG4iXX0=
